Ext.define("Exp.util.DateUtil",{singleton:true,getDateStr:function(a,b){a.setDate(a.getDate()+b);return this.formatDate(a)},getWeekStartEnd:function(d){var g=d.getDay();var c=d.getDate();var f=d.getMonth();var e=d.getYear();e+=(e<2000)?1900:0;var a=new Date(e,f,c-g);var b=new Date(e,f,c+(6-g));return{from:this.formatDate(a),to:this.formatDate(b)}},getPreWeekStartEnd:function(){var a=new Date();var b=this.getWeekStartEnd(a).from;var c=this.getDateStr(new Date(b),-1);return this.getWeekStartEnd(new Date(c))},formatDate:function(b){var e=b.getFullYear();var a=b.getMonth()+1;var c=b.getDate();if(a<10){a="0"+a}if(c<10){c="0"+c}return e+"-"+a+"-"+c}});Ext.define("Exp.util.NodeResolve",{singleton:true,traversalTree:function(b,g){var d=b.children,f=[],c=0,a,e;g.call(this,b);while(d.length!=0){for(c=0,a=d.length;c<a;c++){e=d[c];g.call(this,e);f=f.concat(e.children)}d=f;f=[]}return b}});Ext.define("Exp.util.ResourceLoader",{singleton:true,loadFile:function(b,c,a){Ext.Ajax.request({url:b,success:function(d){var e=d.responseText;c.call(a||window,e)}})},loadCss:function(c){var a=document.getElementsByTagName("head")[0];var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=c;a.appendChild(b)}},function(a){Exp.loadFile=Ext.Function.alias(a,"loadFile");Exp.loadCss=Ext.Function.alias(a,"loadCss")});Ext.define("Exp.component.Navigation",{extend:"Ext.Component",cls:"student-sta-titlediv",navgData:{},initComponent:function(){this.addEvents("click");this.tpl=new Ext.XTemplate('<div class="student-sta-titname"><tpl for="nodes"> <a href="#" treeId="{id}">{text}</a> {[xindex === xcount ? "" : ">>"]} </tpl></div><div class="student-sta-iconname"><tpl for="children">{% if (xcount === 0) break; %} <a href="#" treeId="{id}">{text}</a></tpl> </div>');this.callParent();this.bindEvents()},bindEvents:function(){var a=this;this.on("afterrender",function(){if(!a.navgData){this.update({nodes:[],children:[]})}else{this.transData({id:0});this.update(this.currentData)}});this.on({click:{element:"el",fn:function(c,b){if(b.tagName=="A"){var d={id:c.getTarget().getAttribute("treeId"),text:b.text};a.transData(d);a.update(a.currentData);a.fireEvent("click")}}}})},transData:function(f){var b=f.id,a=[],g=true,c=[],e={};while(g){for(var h in this.navgData){var j=this.navgData[h];if(j.id==b){a.push(j);b=j.pid;break}}if(a.length!=0&&(a[a.length-1].pid==-1||a[a.length-1].pid==null)){g=false}if(typeof this.navgData[b]=="undefined"){g=false}}for(var d=a.length-1;d>=0;d--){c.push(a[d]);if(d==0){e.children=a[d].children}}this.currentData=Ext.apply({nodes:c},e)},getValue:function(){return this.currentData||{}},refreshTpl:function(a){this.navgData=a;this.transData({id:0});this.update(this.currentData)}});Ext.define("Exp.chart.Chart",{extend:"Ext.Component",chartData:{},chartType:"",chartTheme:"",margin:0,listeners:{resize:function(){var c=this.getWidth(),a=this.getHeight();var b=this._countChartWH(c,a);this.chart.resizeTo(c,a)}},afterRender:function(){this.padding=0;this.callParent(arguments);var a=this.getEl().id;var b=this._getChartCfg();Ext.apply(b,this.chartData);this.chart=new FusionCharts({type:this.chartType,width:"100%",height:"100%",dataFormat:"json",dataSource:b});this.chart.render(a)},_getChartCfg:function(){var a=this.chartType;switch(a){case"column2d":return{chart:{caption:"",subCaption:"",xAxisName:"",yAxisName:"",theme:this.chartTheme||"zune"},data:{}};case"pie2d":return{chart:{caption:"",subCaption:"",enableSmartLabels:"0",showPercentValues:"1",showTooltip:"0",decimals:"1",theme:this.chartTheme||"zune"}};case"doughnut2d":return{chart:{centerLabel:"$label: $value",theme:this.chartTheme||"zune"}};case"mscolumn2d":return{chart:{subCaption:" ",palettecolors:"#0099ff,#cc6666,#009900",bgcolor:"FFFFFF",legendposition:"RIGHT",showBorder:"0"},categories:[{category:[{label:""}]}],dataset:[{seriesname:"",data:[]}]};case"maps/china":return{map:{animation:"0",showbevel:"0",usehovercolor:"1",canvasbordercolor:"FFFFFF",bordercolor:"FFFFFF",showlegend:"1",showshadow:"0",legendposition:"RIGHT",legendborderalpha:"0",legendbordercolor:"ffffff",legendallowdrag:"1",legendshadow:"0",connectorcolor:"000000",fillalpha:"80",hovercolor:"CCCCCC"},colorrange:{color:[{minvalue:"500",maxvalue:"600",displayvalue:"> 500",code:"892C03"},{minvalue:"200",maxvalue:"500",displayvalue:"200 - 500",code:"e44a00"},{minvalue:"100",maxvalue:"200",displayvalue:"100 - 200",code:"f8bd19"},{minvalue:"90",maxvalue:"100",displayvalue:"< 100",code:"6baa01"}]},data:{}};default:return{}}},_countChartWH:function(c,a){var b=this.chartType;switch(b){case"column2d":return{width:c,height:c*1/4};case"pie2d":return{width:c,height:c/2};default:return{width:c,height:a}}},update:function(a){if(this.chart){this.chart.setJSONData(Ext.apply(this.chart.getJSONData(),a))}}});Ext.define("Exp.chart.HighChart",{extend:"Ext.Component",margin:0,listeners:{resize:function(){var b=this.getWidth()-10,a=this.getHeight()-10;if(this.chart){this.chart.setSize(b,a)}}},afterRender:function(){this.padding=0;this.callParent(arguments);this.domId=this.getEl().id;Ext.EventManager.onWindowResize(function(){this.fireEvent("resize")},this)},redraw:function(a,b){if(b){$("#"+this.domId).highcharts(a);this.chart=$("#"+this.domId).highcharts();this.fireEvent("resize")}},addChart:function(a){this.chart=a},height:400,removeChart:function(){$("#"+this.domId).removeChild()}});Ext.define("Exp.component.SimpleDate",{extend:"Ext.container.Container",width:500,initComponent:function(){this.addEvents("validatepass");this.callParent(arguments);this.createComponent()},createComponent:function(){var a=new Ext.XTemplate(this.getTplStr()),b=this;this.compo=new Ext.Component({style:{"float":"left"},tpl:a,data:{}});this.compo.on({click:{element:"el",fn:function(d,c){if(c.tagName=="A"){b.clickFn(c)}}}});this.createDateSection();this.add([this.compo,this.fromDateField,this.toDateField])},createDateSection:function(){var a=this;this.fromDateField=Ext.create("Ext.form.field.Date",{width:100,style:{"float":"left"},name:"from_date",margin:"3 0 0 0",format:"Y-m-d",value:new Date(),editable:false});this.toDateField=Ext.create("Ext.form.field.Date",{width:100,style:{"float":"left"},name:"to_date",margin:"3 0 0 0",format:"Y-m-d",value:new Date(),editable:false});this.toDateField.addListener("change",function(c,f,d){var b=c.getRawValue(),e=this.fromDateField.getRawValue();if(e!=""){if(b>=e){a.fireEvent("validatepass")}else{this.toDateField.focus();this.toDateField.setValue(null)}}},this);this.fromDateField.addListener("change",function(c,f,d){this.toDateField.setValue(null);var e=c.getRawValue(),b=this.toDateField.getRawValue();this.toDateField.setMinValue(e);if(b!=""){if(b>=e){a.fireEvent("validatepass")}else{this.fromDateField.setValue(null);this.fromDateField.focus()}}},this)},getTplStr:function(){return'<div><a class="jiaoxuerizhi-alink jiaoxuerizhi-alink-visited" href="#" dType="jr">今日</a><a class="jiaoxuerizhi-alink" href="#" dType="zr">昨日</a><a class="jiaoxuerizhi-alink" href="#" dType="bz">本周</a><a class="jiaoxuerizhi-alink" href="#" dType="sz">上周</a><a class="jiaoxuerizhi-alink" href="#" dType="zjygy">最近一个月</a></div>'},addClass:function(b,a){b.className+=" "+a},removeClass:function(c,b){var a=c.className;c.className=null;c.className=a.split(new RegExp(" "+b+"|"+b+" |^"+b+"$","ig")).join("")},clickFn:function(g){var f=g.getAttribute("dType");var d=g.tagName;var e=g.parentNode.childNodes;for(var c=0;c<e.length;c++){this.removeClass(e[c],"jiaoxuerizhi-alink-visited")}if(d=="A"){this.addClass(g,"jiaoxuerizhi-alink-visited")}switch(f){case"jr":var b=Exp.util.DateUtil.getDateStr(new Date(),0);this.setValue({from:b,to:b});break;case"zr":var b=Exp.util.DateUtil.getDateStr(new Date(),-1);this.setValue({from:b,to:b});break;case"bz":this.setValue(Exp.util.DateUtil.getWeekStartEnd(new Date()));break;case"sz":this.setValue(Exp.util.DateUtil.getPreWeekStartEnd(new Date()));break;case"zjygy":var h=Exp.util.DateUtil.getDateStr(new Date(),-30);var a=Exp.util.DateUtil.getDateStr(new Date(),0);this.setValue({from:h,to:a});break;default:break}},getValue:function(){return{from:this.fromDateField.getRawValue(),to:this.toDateField.getRawValue()}},setValue:function(a){this.fromDateField.setValue(new Date(a.from));this.toDateField.setValue(new Date(a.to))}});Ext.define("Exp.component.ZonePart",{extend:"Ext.Component",style:{background:"#fff",padding:"10px"},width:"100%",listeners:{resize:function(){if(this._chartCompo){this._chartCompo.fireEvent("resize")}}},initComponent:function(){var a='<div class="student-sta-overFlow"><div class="student-sta-floatLeft student-sta-bigfont">{title}</div><div class="student-sta-floatRight">{text} <span class="student-sta-weightbold student-sta-bigfont">{boldText}</span></div></div><div class="student-sta-clear"></div><div id="{0}_dsfChartRenderId" style="height: {chartHeight}px"></div>';this.tpl=Ext.String.format(a,this.id);this.callParent(arguments)},insertChart:function(a){a.render(this.id+"_dsfChartRenderId");this._chartCompo=a},getChart:function(){return this._chartCompo}});Ext.define("Exp.component.ZonePart2",{extend:"Ext.Component",style:{background:"#fff"},width:"100%",listeners:{resize:function(){if(this._chartCompo){this._chartCompo.fireEvent("resize")}}},initComponent:function(){var a='<div class="student-sta-zonepart"><table style="width:100%;height: 100%"><tr><td style="width:150px;"><div class="student-sta-left" style="background:#e4e4e4;height:100%;width:100%;border-radius:5px 0px 0px 5px;position:relative;"><tpl for="."><div class="student-sta-ti-title student-sta-white student-sta-bg-{theme}" style="margin:10px 10px;">{title}</div><div class="student-sta-renshu student-sta-{theme}">{count}</div><div class="student-sta-liang student-sta-white student-sta-bg-{theme}">{axisname}</div></tpl><div class="student-sta-sanjiao"></div></div></td><td><div id="{0}_dsfChartRenderId" class="student-sta-left" style="height:100%;width:100%;padding: 10px;"></div></td></tr></table></div>';this.tpl=Ext.String.format(a,this.id);this.callParent(arguments)},insertChart:function(a){a.render(this.id+"_dsfChartRenderId");this._chartCompo=a},getChart:function(){return this._chartCompo}});Ext.define("Exp.component.PageTitle",{extend:"Ext.Component",tpl:'<div class="wbh-common-top"><h1> <span class="wbh-common-model" style="background: none">{pageName}</span><div attr="help" class="another-add-help"></div> <span class="another-add-more"></span></h1></div><div class="another-add-helpinfo">{pageHelpInfo}</div>',initComponent:function(){this.addEvents("click");this.callParent(arguments);this.bindEvents()},bindEvents:function(){var a=this;this.on({click:{element:"el",fn:function(d){var b=d.target;if(b.tagName=="DIV"&&(Ext.get(b).getAttribute("attr")=="help")){if($){$(Ext.get(this.id).query(".another-add-helpinfo")).slideToggle()}else{var c=Ext.get(Ext.get(this.id).query(".another-add-helpinfo"));c.setVisibilityMode(2);c.toggle()}}if(b.tagName=="A"){a.fireEvent("click")}}}})}});Ext.define("Exp.component.NumberWidget",{extend:"Ext.Component",tpl:'<div class="student-sta-tableft {[values.sfxz == true ? "student-sta-tabbg-grey" : ""]}"><div class="student-sta-title student-sta-white student-sta-bg-{theme}" >{title}</div><div class="student-sta-renshu student-sta-{theme}" >{count}</div><div class="student-sta-liang student-sta-white student-sta-bg-{theme}">{axisname}</div><div class="student-sta-zhuanye">学历：{bz1}</div><div class="student-sta-zhuanye">学位：{bz2}</div></div>',initComponent:function(){this.addEvents("click");this.callParent(arguments);var a=this;this.on({click:{element:"el",fn:function(c,b){a.fireEvent("click")}}})},getData:function(){return this.data}});Ext.define("Exp.component.NnvRatio",{extend:"Ext.Component",listeners:{resize:function(){var a=this.translateData();this.update(a)}},initComponent:function(){this.tpl='<tpl if="success == true"> <div style="position: relative;"> <div id="{0}_fdk" class="student-sta-zongjie" style="display:none;">{xb} {count}人 <br /> 占 {bl}%</div><div class="student-sta-marginauto" style="padding-top: 80px;" ><tpl for="imgs"><img src="app/pages/sc/base/component/images/{img}.png" xb="{img}" width="{width}" height="70" style="margin-right:{marginRight}px;margin-left: {marginLeft}px" /></tpl></div><div class="student-sta-marginauto student-sta-overFlow"><div class="student-sta-floatLeft student-sta-list-red" ms="true" style="width:{nvsZb}%"></div><div class="student-sta-floatLeft student-sta-list-blue" ms="true" style="width:{nsZb}%"></div></div><div class="student-sta-clear"></div><div class="student-sta-overFlow"><div class="student-sta-floatRight student-sta-weightbold "> {text}</div></div></div><tpl else><div align="center" style="font-size: 10px; color:#e4e4;">No data to display</div></tpl>';this.tpl=Ext.String.format(this.tpl,this.id);this.callParent(arguments);var a=this;this.on({mouseover:{element:"el",fn:function(d,c){if(c.tagName=="IMG"||d.getTarget().getAttribute("ms")){var b=d.getX()-this.getX();var e=d.getTarget().getAttribute("xb");if(e=="girl"){Ext.get(a.id+"_fdk").setStyle({left:b+"px",color:"red",display:"block"});document.getElementById(a.id+"_fdk").innerHTML="女 "+a.nnvbl.nvs.count+"人<br/> 占 "+a.nnvbl.nvs.zb+"%"}else{Ext.get(a.id+"_fdk").setStyle({left:b+"px",color:"blue",display:"block"});document.getElementById(a.id+"_fdk").innerHTML="男 "+a.nnvbl.ns.count+"人<br/> 占 "+a.nnvbl.ns.zb+"%"}}}}})},afterRender:function(){var a=this.translateData();this.update(a)},translateData:function(){var b=10,e=this.getWidth(),d=0,h=0,f=(e-10)/b;if(typeof this.nnvbl=="undefined"){return{success:false}}d=Math.round(this.nnvbl.ns.zb/10);h=Math.round(this.nnvbl.nvs.zb/10);var g=[];for(var c=0;c<h;c++){g.push({img:"girl",width:30,marginRight:(f-30)/2,marginLeft:(f-30)/2})}for(var a=0;a<10-h;a++){g.push({img:"boy",width:30,marginRight:(f-30)/2,marginLeft:(f-30)/2})}return{success:true,imgs:g,text:this.nnvbl.text||"",nvsZb:this.nnvbl.nvs.zb,nsZb:this.nnvbl.ns.zb}},refreshTpl:function(a){this.nnvbl=a;a=this.translateData();this.tpl.overwrite(this.id,a)}});Ext.define("Exp.component.TopBottom",{extend:"Ext.Component",listeners:{resize:function(){var a=this.translateData();this.update(a)}},initComponent:function(){this.tpl='<div class="student-sta-marginauto" ><div class="student-sta-leibietop-triangle"></div><div class="student-sta-leibietop"><p class="student-sta-imporant" style="text-align: center;">{top.count}人</p><p style="text-align: right;">{top.zb}%</p><p style="text-align: left;"> {top.lb}</p></div><div class="student-sta-leibiebottom"><p style="text-align: left;">{bottom.lb}</p><p style="text-align: right;">{bottom.zb}%</p><p class="student-sta-imporant" style="text-align: center;">{bottom.count}人</p></div><div class="student-sta-leibiebottom-triangle"></div><div style="text-align:center;"><b>{xy}</b> ，人员学科组成多以 <b>{xk}</b> 学科人员组成。</div></div>';this.callParent(arguments)},afterRender:function(){var a=this.translateData();this.update(a)},translateData:function(){return{top:{count:0,zb:0,lb:"--"},bottom:{count:0,zb:0,lb:"--"},xy:"--",xk:"--",qxxk:"--"}}});Ext.define("Exp.component.SimpleNumberWidget",{extend:"Ext.Component",initComponent:function(){this.callParent(arguments);this.tpl='<div style="border: 1px solid #AAA;width:150px;padding:10px 5px 10px 5px;text-align: center; font-weight:bold;border-radius: 3px;display: inline-block;"><div style="color: #FFF;font-size:15px; background-color: '+this.color+';padding: 3px;border-radius: 3px;">{title}</div><div style="font-size: 22px;height:55px;line-height:55px;padding:5px; color: '+this.color+';">{value}</div><div style="margin: 0 auto;line-height:25px; border-radius:25px;width: 25px;height: 25px;background-color: '+this.color+';color:#FFF; ">{unit}</div></div>'}});Ext.define("Exp.component.SimpleNumberWidget2",{extend:"Ext.Component",initComponent:function(){this.callParent(arguments);this.tpl="{title}<br><br><b style='font-size:20px'>{value}&nbsp;</b>{unit}"},padding:"5px 20px",data:{},style:{"border-left":"1px solid #b8bab9","font-size":"13px","font-family":"微软雅黑",}});Ext.define("Exp.component.SsRzCompo",{extend:"Ext.Component",tpl:'<div class="rztj-titname"><div class="student-sta-ti-title ">{MC}</div><div style=" padding:0 10px; "><div  class="student-sta-left-width"><div class="student-sta-ti" ><fieldset><legend>容量</legend><p style="text-align: center;">层 <span class="student-sta-count-green">{lcs} </span>房间 <span  class="student-sta-count-green">{fjs} </span>床位 <span  class="student-sta-count-green">{cws} </span></p></fieldset></div><div class="student-sta-ti"  ><fieldset><legend>入住率</legend><p style="text-align: center;"><span  class="student-sta-count-green">{rzl}%</span>，空床位<span  class="student-sta-count-green"> {kcw} </span></p></fieldset></div><div class="student-sta-ti" ><fieldset><legend>住宿标准</legend><p style="text-align: center;"><span  class="student-sta-count-green"><tpl if="zsbz.length == 0">--元/年<tpl else><tpl for="zsbz">{MC}元/年{[xindex==xcount?"":","]}</tpl></tpl></p></fieldset></div></div><div class="student-sta-right-width"><div class="student-sta-ti-border"  ><h3>{xy}</h3><p><span>居多,占总人数的 {rszb}%</span></p></div><div class="student-sta-ti"  style="margin-left:15px;" ><fieldset><legend>住宿性别</legend><div style="width:130px; margin:0 auto;text-align: center"><tpl if="nan.count &gt; 1"> <div class="student-sta-count-blue"><img style="float:left" src="app/pages/sc/base/component/images/boy.png"/> <span style="float: right;">{nan.count} 人</span><br><span style="float: right;">{nan.zb}%</span> </div> </tpl><div style="clear:both;"></div><tpl if="nv.count &gt; 1"> <div class="student-sta-count-red"> <img  style="float:left" src="app/pages/sc/base/component/images/girl.png"/> <span style="float: right;">{nv.count} 人</span><br><span style="float: right;">{nv.zb}%</span> </div> </tpl></div></fieldset></div></div></div><div style="clear:both;"></div><div style="text-align:right;font-size:12px;"  class="student-sta-green"><b> {ssllx}<b> </div></div>'});Ext.define("Exp.chart.YearPicker",{extend:"Ext.Component",margin:0,listeners:{change:function(){}},initComponent:function(){var b=parseInt((new Date()).getFullYear()),a="",d=b+"-"+(b+1);this.value=d;for(var c=0;c<this.num;c++){var e=(b-c)+"-"+(b+1-c);a+="<option value= '"+e+"' "+((this.value==e?"select='true'":""))+">"+e+"</option>"}this.callParent(arguments);this.html="<div style='padding:10px;border: 1px solid #aaa;'>选择统计年份 ： <select id = "+this.id+"_years>"+a+"</select><input type='button' name='"+this.id+"_btn' value='本学年' year='"+b+"-"+(b+1)+"' style=' width: 50px; height: 25px;margin: 0px 10px;'/> <input type='button' name='"+this.id+"_btn' value='上学年' year='"+(b-1)+"-"+b+"' style='width: 50px; height: 25px;margin: 0px 10px;'/> &nbsp;&nbsp;&nbsp;&nbsp;☞选择统计年份更新页面内容。 </div>"},afterRender:function(){this.bindEvent()},num:5,getValue:function(){return this.value},value:null,bindEvent:function(){var d=this;var b=d.id+"_years";var e=Ext.get(b);e.on("change",function(){d.value=e.getValue();d.fireEvent("change",e.getValue())});var a=Ext.get(d.id);var c=a.query("input[name="+d.id+"_btn]");Ext.get(c).on("click",function(h,f){var g=Ext.get(f).getAttribute("year");d.value=g;d.fireEvent("change",g);if($){$("#"+b).val(g)}})}});Ext.define("Exp.chart.PicAndInfo",{extend:"Ext.Component",margin:0,initComponent:function(){this.callParent(arguments);this.tpl="<div style='margin-top:5px;'><span style='border:0px;border-left: 4px solid #3196fe;padding:0px 0px 0px 5px;color: #265efd;font-weight: bold;font-size: 16px;'>"+this.title+"</span><hr style='margin-top: 5px;' color='#5299eb'></div>";if(!this.onlyTitle){this.tpl+="<div >	<table style='width: 100%;'><tr> <td width='130px'><img alt='"+this.title+"' src='"+this.picurl+"' width='120px' height='100px'/></td><td><div style='background-color: #e3f4fb;height: 80px;width: 100%;padding : 5px;'>"+this.tplHtml+"</div></td></tr></table></div>"}},data:{},onlyTitle:false});Ext.define("Exp.component.SsRzCompo",{extend:"Ext.Component",tpl:'<div class="rztj-titname"><div class="student-sta-ti-title ">{MC}</div><div style=" padding:0 10px; "><div  class="student-sta-left-width"><div class="student-sta-ti" ><fieldset><legend>容量</legend><p style="text-align: center;">层 <span class="student-sta-count-green">{lcs} </span>房间 <span  class="student-sta-count-green">{fjs} </span>床位 <span  class="student-sta-count-green">{cws} </span></p></fieldset></div><div class="student-sta-ti"  ><fieldset><legend>入住率</legend><p style="text-align: center;"><span  class="student-sta-count-green">{rzl}%</span>，空床位<span  class="student-sta-count-green"> {kcw} </span></p></fieldset></div><div class="student-sta-ti" ><fieldset><legend>住宿标准</legend><p style="text-align: center;"><span  class="student-sta-count-green"><tpl if="zsbz.length == 0">--元/年<tpl else><tpl for="zsbz">{MC}元/年{[xindex==xcount?"":","]}</tpl></tpl></p></fieldset></div></div><div class="student-sta-right-width"><div class="student-sta-ti-border"  ><h3>{xy}</h3><p><span>居多,占总人数的 {rszb}%</span></p></div><div class="student-sta-ti"  style="margin-left:15px;" ><fieldset><legend>住宿性别</legend><div style="width:130px; margin:0 auto;text-align: center"><tpl if="nan.count &gt; 1"> <div class="student-sta-count-blue"><img style="float:left" src="app/pages/sc/base/component/images/boy.png"/> <span style="float: right;">{nan.count} 人</span><br><span style="float: right;">{nan.zb}%</span> </div> </tpl><div style="clear:both;"></div><tpl if="nv.count &gt; 1"> <div class="student-sta-count-red"> <img  style="float:left" src="app/pages/sc/base/component/images/girl.png"/> <span style="float: right;">{nv.count} 人</span><br><span style="float: right;">{nv.zb}%</span> </div> </tpl></div></fieldset></div></div></div><div style="clear:both;"></div><div style="text-align:right;font-size:12px;"  class="student-sta-green"><b> {ssllx}<b> </div></div>'});Ext.define("Exp.component.SimpleYear",{extend:"Exp.component.SimpleDate",width:500,start:1990,createDateSection:function(){var b=this;var a=new Ext.data.Store({fields:["id","name"],data:this.getNfqj(this.start||1900)});this.fromDateField=Ext.create("Ext.form.ComboBox",{width:100,style:{"float":"left"},name:"from_date",margin:"3 0 0 0",valueField:"id",displayField:"name",store:a,value:new Date().getFullYear(),editable:true});this.toDateField=Ext.create("Ext.form.ComboBox",{width:100,style:{"float":"left"},name:"to_date",margin:"3 0 0 0",valueField:"id",displayField:"name",store:Ext.clone(a),value:new Date().getFullYear(),editable:false});this.toDateField.addListener("change",function(d,g,e){var c=d.getRawValue(),f=this.fromDateField.getRawValue();if(f!=""){if(c>=f){b.fireEvent("validatepass")}else{this.toDateField.focus();this.toDateField.setValue(null)}}},this);this.fromDateField.addListener("change",function(d,g,e){this.toDateField.setValue(null);var f=d.getRawValue(),c=this.toDateField.getRawValue();if(c!=""){if(c>=f){b.fireEvent("validatepass")}else{this.fromDateField.setValue(null);this.fromDateField.focus()}}},this)},getTplStr:function(){return'<div><a class="jiaoxuerizhi-alink jiaoxuerizhi-alink-visited" href="#" dType="jr">今年</a><a class="jiaoxuerizhi-alink" href="#" dType="zr">去年</a><a class="jiaoxuerizhi-alink" href="#" dType="bz">近五年</a><a class="jiaoxuerizhi-alink" href="#" dType="sz">近十年</a><a class="jiaoxuerizhi-alink" href="#" dType="zjygy">近二十年</a></div>'},clickFn:function(f){var e=f.getAttribute("dType");var c=f.tagName;var d=f.parentNode.childNodes;for(var b=0;b<d.length;b++){this.removeClass(d[b],"jiaoxuerizhi-alink-visited")}if(c=="A"){this.addClass(f,"jiaoxuerizhi-alink-visited")}var a=new Date().getFullYear();switch(e){case"jr":this.setValue({from:a,to:a});break;case"zr":this.setValue({from:a-1,to:a-1});break;case"bz":this.setValue({from:a-4,to:a});break;case"sz":this.setValue({from:a-9,to:a});break;case"zjygy":this.setValue({from:a-19,to:a});break;default:break}},setValue:function(a){this.fromDateField.setValue(a.from);this.toDateField.setValue(a.to)},getNfqj:function(c){var a=[],b=new Date().getFullYear();for(;c<=b;c++){a.push({id:c,name:c+"年"})}return a},getValue:function(){return{from:this.fromDateField.getValue(),to:this.toDateField.getValue()}}});Ext.define("Exp.component.MetroTextWidget",{extend:"Ext.Component",initComponent:function(){this.callParent(arguments);this.tpl="<div style='height:240px;width:320px;font-family:微软雅黑; color:#fff;white-space:nowrap; background-color:"+this.color+";padding:10px;'><div style='font-size:26px;margin-bottom: 5px; '>{title}</div>	<tpl for='texts'><tpl if='xindex &lt;= 4'>  <div style='width:140px;height: 100px;font-size: 18px;float: left;'>{text}</div>	</tpl>	</tpl><div style='clear: both;'></div></div>"},color:"#6599ff",data:{}});Ext.define("Exp.chart.TimeShaft",{extend:"Ext.Component",margin:0,listeners:{readMore:function(){}},initComponent:function(){this.callParent(arguments);this.tpl="<div id='"+this.id+"_content'></div><div id='"+this.id+"_more' style='border:1px solid #AAA;margin-top:30px;padding:10px;text-align:center;font-weight:bold;cursor: pointer;'> 点击加载更多...</div>";this.on("afterrender",function(){this.addItems(this.data);this.bindEvent()})},data:[],modelHtml:"<div><table width='100%'><tr><td width='100px' style='vertical-align: top;padding-top: 40px;font-weight: bold;font-size:14px;'><div style='text-align:center;'>{0}</div></td><td height='300px' width='80px'> <div style='width: 80px; height: 100%; margin-top: 20px; background: url(app/pages/sc/base/component/images/tsbz.png) repeat;'> <div style='height: 80px; width: 80px; padding: 20px; background: url(app/pages/sc/base/component/images/tsb.png) no-repeat;padding:20px;'> <div style='height:40px;width:40px;background-image: url({1});'></div></div></div></td> <td height='300px'> <div style='position: relative; height: 100%;width: 100%; padding: 10px 0px 5px 15px;'> <div style='position: absolute; top: 30px; left: 1px; height: 15px; width: 18px; background: url(app/pages/sc/base/component/images/tsi.png) no-repeat;'></div> <div style='height: 100%; background-color: #afdcf8; border: 1px solid #000; border-radius: 10px;padding:10px;'>{2} </div></div></td></tr></table> </div>",addItems:function(g){var f=this;f.total+=g.length;if(g.length==0){$("#"+f.id+"_more").hide();return}else{$("#"+f.id+"_more").show()}for(var d=0;d<g.length;d++){var e=g[d];var b=e.date||"",a=e.picUrl||"app/pages/sc/base/component/images/tpic.png",c=e.html||"无内容";$("#"+f.id+"_content").append(Ext.String.format(f.modelHtml,b,a,c))}},total:0,bindEvent:function(){var a=this;$("#"+a.id+"_more").click(function(){$("#"+a.id+"_more").html("<div class='loading-indicator'>正在加载....</div>");a.fireEvent("readMore");$("#"+a.id+"_more").html("点击加载更多..")})},clear:function(){this.total=0;$("#"+this.id+"_content").html("")}});Ext.define("Exp.component.Sslist",{extend:"Ext.Component",height:700,initComponent:function(){this.callParent(arguments);this.tpl='<div id="'+this.id+'_container" style="width: 210px;height: '+this.height+'px;border: 1px solid #AAA;border-radius:10px;overflow-y: auto;padding: 10px;"><tpl for="."><div style="width: 180px;height:100px;border:1px solid #AAA;border-radius:5px;margin-bottom: 10px;padding: 5px;line-height: 30px;background-color: #f5f5f5;"><div style="font-weight: bold;">{name}</div><div>共{cs}层，房间数 {fjs} 间</div><div>床位数 {cws} 个&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" ssid="{ssid}" value="详情"  style="width: 50px;height: 26px;border-radius :13px;"/></div></div></tpl></div>'},listeners:{select:function(){}},afterRender:function(){this.bindEvent()},bindEvent:function(){var a=this;$("#"+a.id).click(function(c){if(c.target.tagName=="INPUT"){var b=$(c.target);b.parent().parent().siblings().css({"background-color":"#f5f5f5",color:"#000"});b.parent().parent().css({"background-color":"#009865",color:"#FFF"});a.value=b.attr("ssid");a.fireEvent("select",b.attr("ssid"),$(b.parent().siblings()[0]).html())}})},data:[],getValue:function(){return this.value}});