(function(){var EG=window.EG=function EG(){};EG._className="EG";EG.debug=true;EG.onError=function(sMsg,sUrl,sLine){if(EG.debug){var errorMsg="<div style='text-align:left'><b>原因</b>:"+sMsg+"<br/>";errorMsg+="<b>行数</b>:"+sLine+"<br/>";errorMsg+="<b>URL</b>:"+sUrl+"<br/></div>";if(EG.Locker){EG.Locker._lock=true;EG.Locker.message({message:errorMsg,closeable:false,force:true})}else{alert(errorMsg)}}};EG.doc=document;EG.body=null;EG.getBody=function(){if(!EG.body){EG.body=EG.doc.body}return EG.body};EG.unnull=function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!=null){return arguments[i]}}return null};EG.n2d=function(o,d){if(o==null){return d}else{return o}};EG.f2o=function(o){if(o==null){return null}if(typeof(o)=="function"){return o()}else{return o}};EG.getScriptPath=function(scriptName){var js=EG.doc.scripts;var jsPath;for(var i=js.length;i>0;i--){if(js[i-1].src.indexOf(scriptName)>-1){jsPath=js[i-1].src.substring(0,js[i-1].src.lastIndexOf("/")+1);if(jsPath.indexOf("http://")>=0){jsPath=jsPath.substring(jsPath.indexOf("/",10))}return jsPath}}return null};var scriptPath="eg";EG.basePath=window._EG_BASEPATH_||EG.getScriptPath(scriptPath);EG.contextPath="";EG.copy=function(obj,props,override,clone){for(var key in props){if(override||typeof(obj[key])=="undefined"){if(clone){obj[key]=EG.clone(props[key])}else{obj[key]=props[key]}}}return obj};EG.getType=function(o){return Object.prototype.toString.call(o).slice(8,-1).toLowerCase()};EG.types={"undefined":1,"null":1,number:1,"boolean":1,string:1,array:2,"function":3,date:4};EG._clone=function(dObj,sObj,key){var val=sObj[key];var type=EG.types[EG.getType(val)];if(1==type){dObj[key]=val}else{if(4==type){dObj[key]=new Date();dObj[key].setTime(val.getTime())}else{dObj[key]=EG.clone(val)}}};EG.clone=function(obj){if(obj==null){return null}if(typeof(obj)=="undefined"){throw new Error("EG.clone#待clone参数未定义")}var cObj,typeNum,i,il,fn_body,fn_args;var type=EG.getType(obj);typeNum=EG.types[type];cObj=obj;if(!typeNum){if(type!="object"){}else{if(obj==null||obj.constructor==null){alert(obj)}cObj=new obj.constructor();for(i in obj){EG._clone(cObj,obj,i)}}}else{if(2==typeNum){cObj=[];for(i=0,il=obj.length;i<il;i++){EG._clone(cObj,obj,i)}}else{if(3==typeNum){cObj=obj+"";fn_args=cObj.substring(cObj.indexOf("(")+1,cObj.indexOf(")")).replace(/\s/g,"");fn_body=cObj.substring(cObj.indexOf("{")+1,cObj.lastIndexOf("}"));if("[native code]"==fn_body){throw new Error("无法clone native方法 : "+cObj)}if(0<fn_args.il){fn_args=fn_args.split(",");fn_args[fn_args.il]=fn_body;cObj=Function.constructor.apply(win,fn_args)}else{cObj=new Function(fn_body)}}else{if(4==typeNum){cObj=new Date();cObj.setTime(obj.getTime())}}}}return cObj};EG.readyEvents={};EG.onReady=function(className,callback){var c=EG.findClass(className);if(c){callback(c)}else{if(!EG.readyEvents[className]){EG.readyEvents[className]=[]}EG.readyEvents[className].push(callback)}};EG.classUrlFinder=function(className){if(!EG.String.startWith(className,"EG")){throw new Error("模块名前缀不合法:"+className)}var res=className.split(".");res.shift();var classFileName=res[res.length-1];res.pop();return EG.basePath+"src/"+res.join("/").toLowerCase()+"/"+classFileName+".js"};EG.classLoader=function(className,callback,classUrlFinder){if(!classUrlFinder){classUrlFinder=EG._finders[className.substring(0,className.indexOf("."))]}var c;if((c=EG.findClass(className))&&c._className){return callback(c,className)}else{if(callback){EG.onReady(className,function(c){callback(c,className)})}}EG.Ajax.send({url:classUrlFinder(className),callback:function(text){eval(text)}})};EG._finders={};EG.setFinders=function(classPreName,classUrlFinder){EG._finders[classPreName]=classUrlFinder};EG.setFinders("EG",EG.classUrlFinder);EG.nativeMethod={initConfig:function(cfg){if(cfg){for(var key in cfg){var cK=key+"Config";if(typeof(this[cK])!="undefined"){this[cK]=cfg[key]}else{this[key]=cfg[key]}}}},getSuperclass:function(){return this.getClass()._superClass},callSuper:function(name,args){var o;var fn=arguments.callee.caller;var sc=(fn._className?fn:fn._class)._superClass;if(!sc){throw new Error("没有父类")}var methodName,params;if(arguments.length==0){methodName="$constructor";params=[]}else{if(arguments.length==1){if(typeof(arguments[0])=="string"){methodName=arguments[0];params=[]}else{if(EG.isArray(arguments[0])){methodName="$constructor";params=arguments[0]}}}else{methodName=arguments[0];params=arguments[1]}}if(methodName=="$constructor"){o=sc.apply(this,params)}else{o=sc.prototype[methodName].apply(this,params)}return o},getClass:function(){return this._class}};EG._newConst=function(){return function(){var c=arguments.callee;var args=arguments;if(c._config){EG.copy(this,EG.clone(c._config))}if(c._constructor){if(c._beforeConstructor){var me=this;return c._beforeConstructor.apply(this,[function(){return c._constructor.apply(me,args)}])}else{return c._constructor.apply(this,args)}}}};EG._defineClass=function(cfg,name){var statics=cfg.statics,config=cfg.config||{},constructor=cfg.constructor,extend=cfg.extend,beforeConstructor=cfg.beforeConstructor;if(config){config=EG.clone(config)}if({}.constructor==constructor){constructor=null}var clazz=name?null:EG.findClass(name);if(clazz){if(clazz._className){throw new Error("不能重新定义类:"+name)}}else{var _const=EG._newConst();clazz=!name?_const:EG.defineNamespace(name,_const)}if(constructor){constructor._class=clazz}clazz._constructor=constructor;clazz._config=config;clazz._beforeConstructor=beforeConstructor;if(name){clazz._className=name}if(extend){var f=function(){};f.prototype=extend.prototype;clazz.prototype=new f();clazz._superClass=extend;if(extend._config){EG.copy(config,EG.clone(extend._config),false)}}var prototyps=clazz.prototype;EG.copy(prototyps,EG.nativeMethod);prototyps._class=clazz;for(var key in cfg){if(key!="extend"&&key!="statics"&&key!="config"&&key!="constructor"&&key!="beforeConstructor"&&key!="require"){prototyps[key]=cfg[key];if(typeof(cfg[key])=="function"){prototyps[key]._class=clazz}}}if(statics){EG.copy(clazz,statics,true)}if(extend){if(extend.afterExtend){extend.afterExtend(clazz)}}if(name&&EG.readyEvents[name]){var ev;while((ev=EG.readyEvents[name].shift())){ev(clazz)}}return clazz};EG.define=function(name,cfg,classLoader){if(typeof(name)!="string"){cfg=arguments[0];classLoader=arguments[1];name=null}classLoader=classLoader||EG.classLoader;var reqs=[],extend=cfg.extend,require=cfg.require;if(typeof(extend)=="string"){reqs.push(extend)}if(require){if(typeof(require)=="string"){reqs.push(require)}else{reqs=reqs.concat(require)}}if(reqs.length>0){var loadRequire=function(cls,clsName){if(clsName&&extend&&clsName==extend){cfg.extend=cls}if(reqs.length==0){return EG._defineClass(cfg,name)}var req=reqs.shift();var c=EG.findClass(req);if(c){if(req==extend){cfg.extend=c}return loadRequire()}else{return classLoader(req,loadRequire)}};return loadRequire()}else{return EG._defineClass(cfg,name)}};EG.defineNamespace=function(namespace,fn){if(!fn){fn=EG._newConst()}var ss=namespace.split(".");var p=window;for(var i=0;i<ss.length;i++){if(!p[ss[i]]){if(i<ss.length-1){p[ss[i]]=EG._newConst()}else{p[ss[i]]=fn}}p=p[ss[i]]}return p};EG.findClass=function(classNameExp){return EG.findClasses(classNameExp,false)[0]};EG.findClasses=function(classNameExp,returnObj,pClass,classes,packageName){classes=classes||((returnObj)?{}:[]);pClass=pClass||window;packageName=packageName||"";if(!classNameExp){return classes}var classEles=classNameExp.split(".");var classNamePattern=classEles.shift().replace("*",".*");for(var key in pClass){if((typeof(pClass[key])=="function"||typeof(pClass[key])=="object")&&new RegExp("^"+classNamePattern+"$","g").test(key)){var fullKey=packageName?(packageName+"."+key):key;if(classEles.length>0){EG.findClasses(classEles.join("."),returnObj,pClass[key],classes,fullKey)}else{if(returnObj){classes[fullKey]=(pClass[key])}else{classes.push(pClass[key])}}}}return classes};EG.findMethods=function(clazz,methodNameExp,rangeType,returnObj){var ms=((returnObj)?{}:[]);rangeType=rangeType||"all";methodNameExp=methodNameExp.replace("*",".*");var f=function(range){for(var key in range){if(typeof(range[key])=="function"&&new RegExp("^"+methodNameExp+"$","g").test(key)){if(returnObj){ms[key]=range[key]}else{ms.push(range[key])}}}};if(rangeType=="all"||rangeType=="prototype"){f(clazz.prototype)}if(rangeType=="all"||rangeType=="static"){f(clazz)}return ms};EG.isAssignbleFrom=function(obj,klass){var sc=obj.getClass();while(sc=sc._superClass){if(sc==klass){return true}}return false};EG.put=function(key,data){var ks=key.split("."),obj=window;for(var i=0,il=ks.length;i<il;i++){if(i==(il-1)){obj[ks[i]]=data}else{if(!obj[ks[i]]){obj[ks[i]]={}}obj=obj[ks[i]]}}};EG.get=function(key){var ks=key.split("."),obj=window;for(var i=0,il=ks.length;i<il;i++){if(!obj[ks[i]]){return null}obj=obj[ks[i]]}return obj};EG._importCache={};EG.importPath=function(keys,flag){};EG.importPath_static=function(){return EG.importPath(arguments,2)};EG.importPath_class=function(){return EG.importPath(arguments,1)};EG.showSource=function(text){if(!EG.showSourceEle){EG.showSourceEle=EG.CE({tn:"div",style:"position:absolute;z-index:9999",cn:[{tn:"textarea",style:"width:500px;height:500px"},{tn:"button",innerHTML:"hide",onclick:function(){EG.hide(EG.showSourceEle)}}]});EG.getBody().appendChild(EG.showSourceEle)}EG.showSourceEle.childNodes[0].value=text;EG.show(EG.showSourceEle)}})();(function(){EG.define("EG.String",{statics:{isString:function(a){return typeof(a)==="string"},n2e:function(a){return a!==null?a:""},isBlank:function(a){return(a==null||a===""||EG.String.trim(a)==="")},equals:function(c,b,a){return a==true?c.toUpperCase()===b.toUpperCase():c===b},startWith:function(e,d,b){if(e==null||d==null){return false}var a=d.length;if(e.length<a){return false}if(b){for(var c=0;c<a;c++){if(d.charAt(c).toLocaleLowerCase()!=e.charAt(c).toLocaleLowerCase()){return false}}}else{for(var c=0;c<a;c++){if(d.charAt(c)!=e.charAt(c)){return false}}}return true},endWith:function(c,b,a){return(c!==null&&b!==null&&(a==true?c.toUpperCase().lastIndexOf(b.toUpperCase())>0:c.lastIndexOf(b)>=(c.length-b.length)))},trim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},removeEnd:function(b,a){return(EG.String.endWith(b,a))?b.substring(0,b.length-a.length):b},removeStart:function(b,a){return(EG.String.startWith(b,a))?b.substring(a.length,b.length):b},replaceAll:function(c,b,a){return c.replace(new RegExp(b,"g"),a)}}});EG.isBlank=EG.String.isBlank;EG.isString=EG.String.isString})();(function(){EG.define("EG.Date",{statics:{d2s:function(c,g,b){if(!c){c=new Date()}var h=c.getFullYear();var f=c.getMonth()+1;f=f<10?("0"+f):f;var i=c.getDate();i=i<10?("0"+i):i;if(g==null){g=true}if(g){var e=c.getHours();e=e<10?("0"+e):e;var d=c.getMinutes();d=d<10?("0"+d):d;var a=c.getSeconds();a=a<10?("0"+a):a;if(b){return(h+"年"+f+"月"+i+"日"+e+" 小时:"+d+"分"+a+"秒")}else{return(h+"-"+f+"-"+i+" "+e+":"+d+":"+a)}}else{if(b){return(h+"年"+f+"月"+i+"日")}else{return(h+"-"+f+"-"+i)}}},s2d:function(a){if(a.length==10){return new Date(a.substring(0,4),a.substring(5,7)-1,a.substring(8,10))}else{if(a.length==13){return new Date(a.substring(0,4),a.substring(5,7)-1,a.substring(8,10),a.substring(11,13))}else{if(a.length==16){return new Date(a.substring(0,4),a.substring(5,7)-1,a.substring(8,10),a.substring(11,13),a.substring(14,16))}else{if(a.length==19){return new Date(a.substring(0,4),a.substring(5,7)-1,a.substring(8,10),a.substring(11,13),a.substring(14,16),a.substring(17,19))}else{throw new Error("参数不完整")}}}}},compare:function(b,a){if(typeof(b)=="string"){b=EG.Date.s2d(b)}if(typeof(a)=="string"){a=EG.Date.s2d(a)}return b.getTime()-a.getTime()},l2d:function(a){var b=new Date();b.setTime(a);return b},l2s:function(a){return EG.Date.d2s(EG.Date.l2d(a))}}})})();(function(){EG.define("EG.Object",{statics:{extract:function(a,f,e){var d={};for(var c=0,b=a.length;c<b;c++){d[a[c][f]]=a[c][e]}return d},$in:function(d,a){if(a==null){return false}for(var c=0,b=a.length;c<b;c++){if(EG.Object.equals(a[c],d)){return true}}return false},isLit:function(a){return a.constructor==Object},equals:function(f,e){if(f==null&&e==null){return true}var d=EG.getType(f);if(d!=EG.getType(e)){return false}switch(d){case"string":case"function":case"number":return(f===e);case"object":for(var b in f){if(!EG.Object.equals(f[b],e[b])){return false}}return true;case"array":if(f.length!=e.length){return false}for(var c=0,a=f.length;c<a;c++){if(!EG.Object.equals(f[c],e[c])){return false}}return true;default:throw new Error("EG.Object#equals:暂不支持类型"+d)}}}});EG.$in=EG.Object.$in;EG.isLit=EG.Object.isLit})();(function(){EG.define("EG.Array",{statics:{isArray:function(a){return a&&typeof a==="object"&&typeof a.length==="number"&&typeof a.splice==="function"&&!(a.propertyIsEnumerable("length"))},del:function(a,b){if(b==null){throw new Error("EG.Array#del:待删除坐标不能为null")}a.splice(b,1);return a},remove:function(a,c){for(var b=a.length;b>=0;b--){if(c==a[b]){EG.Array.del(a,b)}}return a},insert:function(a,c,b){a.splice(c,0,b);return a},first:function(a){return EG.Array.get(a,0)},last:function(a){return EG.Array.get(a,a.length-1)},get:function(a,b){if(typeof(b)=="number"){if(a.length==0){return null}if(b<0){b=a.length-1+b}return a[b]}else{if(typeof(b)=="string"){if(b=="n"){b="last"}return EG.Array[b](a)}else{throw new Error("EG.Array#get:参数错误"+b)}}},has:function(a,d){if(!a){return false}for(var c=0,b=a.length;c<b;c++){if(d===a[c]){return true}}return false},each:function(a,e,c){if(!a||!e){return null}if(!c){c=[]}var f=null;for(var d=0,b=a.length;d<b;d++){f=e.apply(a[d],c);if(f!=null&&f===false){break}}return a},extract:function(a,d){var e=[];for(var c=0,b=a.length;c<b;c++){e.push(a[c][d])}return e},extract2Arrays:function(a,f,g){if(!g){g=[]}for(var e=0,c=a.length;e<c;e++){var b=[];for(var d=0;d<f.length;d++){b.push(a[e][f[d]])}g.push(b)}return g},extract2Obj:function(a,d){var e={};for(var c=0,b=a.length;c<b;c++){e[a[c][d]]=a[c]}return e},clear:function(a){a.splice(0,a.length);return a},sub:function(c,e,b){var a=[];for(var d=e;d<b;d++){a.push(c[d])}return a},addAll:function(a,b){for(var c=0;c<b.length;c++){a.push(b[c])}}}});EG.isArray=EG.Array.isArray;EG.del=EG.Array.del;EG.remove=EG.Array.remove})();(function(){EG.define("EG.RegExp",{statics:{match:function(b,a){return new RegExp("^"+a+"$").test(b)}}})})();(function(){EG.define("EG.Ajax",{statics:{getXMLHttpRequest:function(){var a=null;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{if(window.ActiveXObject){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(b){a=null}}}}return a},javaURLEncoding:function(a){return window.encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/~/g,"%7E")},send:function(f){if(f==null){throw new Error("EG.Ajax.call#参数不能为空")}var b=f.url,d=f.charset||"UTF-8",h=EG.Ajax.getXMLHttpRequest(),c=EG.unnull(f.httpPost,true),e=EG.unnull(f.async,true),i=EG.unnull(f.callback,""),a=f.erhandler,g=EG.unnull(f.content,"");if(e){h.onreadystatechange=function(){if(h.readyState==4){if(h.status==200){if(i){return i(h.responseText,h)}}else{if(a){return a(h.status,h)}else{throw new Error("EG.Ajax#send:网络访问失败 "+h.status+": "+h.statusText)}}}return null}}if(c){h.open("POST",b,e);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.send(g)}else{h.open("GET",b,e);h.send()}if(!e&&i){return i(h.responseText,h)}return null}}});EG.Ajax.globeRequest=EG.Ajax.getXMLHttpRequest()})();(function(){EG.define("EG.Browser",{statics:{Sys:{},isIE:function(){return c.Sys.ie!=null},isIE6:function(){return c.isIE()&&c.getIEVersion()==6},isIE7:function(){return c.isIE()&&c.getIEVersion()==7},isIE8:function(){return c.isIE()&&c.getIEVersion()==8},getIEVersion:function(){return parseInt(c.Sys.ie.substr(0,c.Sys.ie.indexOf(".")))},isIE8Before:function(){return c.isIE()&&c.getVersion()<=8},isFirefox:function(){return c.Sys.firefox!=null},isChrome:function(){return c.Sys.chrome!=null},isSafari:function(){return c.Sys.safari!=null},isOpera:function(){return c.Sys.opera!=null},getVersion:function(){return c.Sys.ie||c.Sys.firefox||c.Sys.chrome||c.Sys.safari||c.Sys.opera},getDomainAddress:function(){return window.location.href.substr(0,window.location.href.indexOf("/",10))}}});var c=EG.Browser;var a=navigator.userAgent.toLowerCase();var b;(b=a.match(/msie ([\d.]+)/))?c.Sys.ie=b[1]:(b=a.match(/firefox\/([\d.]+)/))?c.Sys.firefox=b[1]:(b=a.match(/chrome\/([\d.]+)/))?c.Sys.chrome=b[1]:(b=a.match(/opera.([\d.]+)/))?c.Sys.opera=b[1]:(b=a.match(/version\/([\d.]+).*safari/))?c.Sys.safari=b[1]:0})();(function(){EG.define("EG.Tools",{statics:{isPressLeft:function(e){e=EG.Event.getEvent(e);if(e.which!=null){return e.which==1}else{return e.button==1}},isPressRight:function(e){e=EG.Event.getEvent(e);if(e.which!=null){return e.which==3}else{return e.button==2}},getParam:function(name){var params=EG.doc.location.search;params=params.substring(1);if(!params){return""}var paramArr=params.split("&");for(var i=0,il=paramArr.length;i<il;i++){if(paramArr[i].indexOf(name)!=-1){return paramArr[i].substring(paramArr[i].indexOf("=")+1)}}return null},getParams:function(){var params={};var strParams=EG.doc.location.search;strParams=strParams.substring(1);if(!strParams){return{}}var paramArr=strParams.split("&");for(var i=0,il=paramArr.length;i<il;i++){params[paramArr[i].substring(0,paramArr[i].indexOf("="))]=paramArr[i].substring(paramArr[i].indexOf("=")+1)}return params},toJSON:function(obj){if(obj==null){return"null"}if(typeof(obj)=="object"){var json=[];if(obj instanceof Array){for(var i=0;i<obj.length;i++){json[i]=(obj[i]!==null)?EG.Tools.toJSON(obj[i]):"null"}return"["+json.join(", ")+"]"}else{for(var key in obj){if(!obj.hasOwnProperty(key)){continue}json.push('"'+key+'" : '+((obj[key]!=null)?EG.Tools.toJSON(obj[key]):"null"))}return"{\n "+json.join(",\n ")+"\n}"}}else{if(typeof(obj)=="string"){return"'"+obj.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"}else{if(typeof(obj)=="boolean"){return obj}else{if(typeof(obj)=="function"){return obj}else{if(typeof(obj)=="number"){return obj}else{if(typeof(obj)=="regexp"){return obj}else{throw new Error("Engin#toJSON:不支持类型:"+typeof(obj))}}}}}}},getScriptPath:EG.getScriptPath,getMousePos:function(evt,refer){var mp;evt=EG.Event.getEvent(evt);if(evt.pageX||evt.pageY){mp={x:evt.pageX,y:evt.pageY}}else{mp={x:evt.clientX+EG.getBody().scrollLeft-EG.getBody().clientLeft,y:evt.clientY+EG.getBody().scrollTop-EG.getBody().clientTop}}if(refer){var rp=EG.Tools.getElementPos(refer);mp={x:mp.x-rp.x,y:mp.y-rp.y}}return mp},getElementPos:function(ele,parent,isOffsetParent){if(isOffsetParent==null){isOffsetParent=true}if(!parent){parent=EG.getBody()}var t=ele.offsetTop;var l=ele.offsetLeft;while((ele=isOffsetParent?ele.offsetParent:ele.parentNode)!=parent){t+=ele.offsetTop;l+=ele.offsetLeft}return{x:l,y:t}},debugObject:function(obj){var s="";for(var key in obj){s+=key+","}alert(s)},aop:function(expression,before,after){if(!before&&!after){return}var mType=-1;if(mType<0){mType=expression.indexOf("###")>0?2:-1}if(mType<0){mType=expression.indexOf("##")>0?1:-1}if(mType<0){mType=expression.indexOf("#")>0?0:-1}if(mType<0){throw new Error("EG#aop:表达式错误>"+expression)}var classNameExp=expression.substr(0,expression.indexOf("#"));var methodNameExp=expression.substr(expression.lastIndexOf("#")+1);var classes=EG.findClasses(classNameExp,true);var cms={};for(var className in classes){(function(){var clazz=classes[className];var f=function(num,tp){var ms=EG.findMethods(clazz,methodNameExp,tp,"all");for(var methodName in ms){cms[className+","+num+","+methodName]=ms[methodName]}};if(mType==2||mType==1){f(1,"static")}if(mType==2||mType==0){f(0,"prototype")}})()}for(var cmName in cms){(function(){var method=cms[cmName];var ks=cmName.split(",");var className=ks[0];var isProptype=(ks[1]=="0");var methodName=ks[2];var clazz=classes[className];if(isProptype){clazz.prototype[methodName]=function(){if(before){before.apply(this,[clazz,className,method,methodName,isProptype])}var r=method.apply(this,arguments);if(after){after.apply(this,[clazz,className,method,methodName,isProptype])}return r}}else{clazz[methodName]=function(){if(before){before(clazz,className,method,methodName,isProptype)}var s="";for(var i=0,il=arguments.length;i<il;i++){if(s!=0){s+=","}s+=("arguments["+i+"]")}var r=null;var p="r=new method("+s+");";eval(p);if(after){after(clazz,className,method,methodName,isProptype)}return r}}})()}},getText:function(textvalues,value){for(var i=0;i<textvalues.length;i++){if(textvalues[i][1]==value){return textvalues[i][0]}}return null},getEllipsis:function(txts,count,endChar){var t="";if(!endChar){endChar=""}if(txts.length>count){t=EG.Array.sub(txts,0,count).join(",");t+="...("+(txts.length)+endChar+")"}else{t=txts.join(",")}return t},watch:function(expression){EG.Tools.aop(expression,EG.Tools.watch_f,null)},watch_f:function(clazz,className,method,methodName,isProptype){if(!window.watchCount){window.watchBox=EG.doc.createElement("div");var ss="position:absolute;z-index:9999;left:0px;top:0px;border:1px solid red;font-size:12px;max-height:500px;overflow:auto;background-color:white".split(";");for(var i=0,il=ss.length;i<il;i++){var sss=ss[i].split(":");watchBox.style[sss[0]]=sss[1]}EG.getBody().appendChild(watchBox);window.watchCount={};window.watchBoxs={}}var key=className+(isProptype?"#":"##")+methodName;if(!watchCount[key]){watchCount[key]=0;watchBoxs[key]=EG.doc.createElement("div");watchBox.appendChild(watchBoxs[key])}watchCount[key]++;watchBoxs[key].innerHTML=(key+":"+watchCount[key])}}});EG.toJSON=EG.Tools.toJSON})();(function(){EG.define("EG.Word",{statics:{first2Uppercase:function(a){return a.substring(0,1).toUpperCase()+a.substring(1)},first2LowerCase:function(a){return a.substring(0,1).toLowerCase()+a.substring(1)}}})})();(function(){EG.define("EG.Validate",{statics:{common_regex:{email:"([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9])+\\.)+([a-zA-Z0-9]{2,10})+",phone:"(13\\d|15[89])\\d{8}",qq:"[1-9]\\d*",tel:"(([0+]\\d{2,3}-)?(0d{2,3})-)(d{7,8})(-(d{3,}))?",idcardNo:"\\d{15}(\\d{3})?",password:"[0-9a-zA-Z]*",wordnum:"[0-9a-zA-Z]*"},common_comment:{email:"xxx@域名",phone:"13X,158,159开头的11位数字",qq:"非0开头的纯数字",tel:"国家(非必填)-区域(非必填)-电话-分机(非必填)",idcardNo:"15或18位数字",password:"字母(含大小写)和数字组合形式",wordnum:"字母(含大小写)和数字组合形式"},getTelRegex:function(a){if(a){a="-"}return"(([0+]\\d{2,3}"+a+")?(0\\d{2,3})"+a+")(\\d{7,8})("+a+"(\\d{3,}))?"},isWordnum:function(a){return EG.RegExp.match(a,EG.Validate.common_regex.wordnum)},isEmail:function(a){return EG.RegExp.match(a,EG.Validate.common_regex.email)},isPassword:function(a){return EG.RegExp.match(a,EG.Validate.common_regex.password)},isPhone:function(a){return EG.RegExp.match(a,EG.Validate.common_regex.phone)},isQq:function(a){return EG.RegExp.match(a,EG.Validate.common_regex.qq)},isTel:function(b,a){return EG.RegExp.match(b,EG.Validate.getTelRegex(a))},isIdcardNo:function(b){var a=b.length;return EG.RegExp.match(b,EG.Validate.common_regex.idcardNo)},$is:function(b,d){var a="is"+EG.Word.first2Uppercase(b);var c=EG.Validate[a];if(!c){throw new Error("EG.Validate:不支持函数"+a)}return c(d)},getComment:function(a){return EG.Validate.common_comment[a]}}})})();(function(){EG.define("EG.Event",{statics:{fireEvent:function(ele,action){action=EG.String.removeStart(action,"on");if(document.all){eval("ele."+action+"();")}else{var e=document.createEvent("HTMLEvents");e.initEvent(action,false,false);ele.dispatchEvent(e)}},_eventFns:{},_getEventFN:function(action){var eventKey="events_"+action;if(!EG.Event._eventFns.hasOwnProperty(eventKey)){EG.Event._eventFns[eventKey]=function(e){var rs=null;for(var i=0,il=this[eventKey].length;i<il;i++){rs=this[eventKey][i].apply(this["on"+action+"Src"]||this,arguments)}return rs}}return EG.Event._eventFns[eventKey]},bindEvent:function(ele,action,handler,cap){action=EG.String.removeStart(action,"on");var eventKey="events_"+action;if(!ele[eventKey]){ele[eventKey]=[];ele[action+"_fn"]=EG.Event._getEventFN(action);if(EG.Browser.isIE()){ele["on"+action]=ele[action+"_fn"]}else{if(ele.addEventListener){ele.addEventListener(action,ele[action+"_fn"],cap)}else{ele.attachEvent("on"+action,ele[action+"_fn"])}}}ele[eventKey].push(handler)},hasEventHandle:function(ele,action,fn){return ele[action+"_fn"]&&EG.Array.has(ele[action+"_fn"],fn)},_fn:{false_return:function(){return false}},bindUnselect:function(ele){if(EG.Browser.isIE()){ele.attachEvent("onselectstart",EG.Event._fn.false_return)}},removeEvent:function(ele,action,handler){action=EG.String.removeStart(action,"on");var eventKey="events_"+action;if(!ele[eventKey]){return}EG.Array.remove(ele[eventKey],handler)},onload:function(fn){EG.Event.bindEvent(window,"load",fn)},getEvent:function(e){return e||window.event},getTarget:function(e){return e?e.target:window.event.srcElement},stopPropagation:function(e){e=EG.Event.getEvent(e);if(e&&e.stopPropagation){e.stopPropagation()}else{window.event.cancelBubble=true}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}}});EG.bindEvent=EG.Event.bindEvent;EG.onload=EG.Event.onload})();(function(){var a=false;if(a){if(!EG.Browser.isIE()&&typeof(HTMLElement)!="undefined"&&!window.opera){HTMLElement.prototype.__defineGetter__("outerHTML",function(){var c=this.attributes,e="<"+this.tagName;for(var d=0;d<c.length;d++){if(c[d].specified){e+="   "+c[d].name+'="'+c[d].value+'"'}}if(!this.canHaveChildren){return e+"   />"}return e+">"+this.innerHTML+"</"+this.tagName+">"});HTMLElement.prototype.__defineSetter__("outerHTML",function(e){var f=EG.doc.createElement("DIV");f.innerHTML=e;for(var c=0;c<f.childNodes.length;c++){this.parentNode.insertBefore(f.childNodes[c],this)}this.parentNode.removeChild(this)});HTMLElement.prototype.__defineGetter__("canHaveChildren",function(){return !/^(area|base|basefont|col|frame|hr|img|br|input|isindex|link|meta|param)$/.test(this.tagName.toLowerCase())})}}EG.define("EG.DOM",{statics:{addChildren:function(h,k,d){var g=(!EG.isArray(k))?[k]:k;for(var f=0,e=g.length;f<e;f++){var j=g[f];if(EG.isLit(j)){j=EG.CE(j)}else{if(j.getElement){j=j.getElement()}}EG.DOM.insertChild(h,j,d);d++}},insertAfter:function(d,e){var c=e.parentNode;if(c.lastChild==e){c.appendChild(d)}else{c.insertBefore(d,b.nextNode(e))}},insertChild:function(c,d,e){if(!e){return c.appendChild(d)}if(typeof(e)=="number"){e=b.childNodes(c)[e]}if(e){c.insertBefore(d,e)}else{c.appendChild(d)}},getOuterHTML:function(c){if(c.parentNode){throw new Error("EG.DOM#getOuterHTML:不支持有父节点的节点")}return EG.CE({tn:"div",cn:[c]}).innerHTML},$:function(d){if(b.isElement(d)){return d}if("string"==typeof(d)){var j=EG.doc.getElementById(d);if(j!=null){return j}else{if((j=EG.doc.getElementsByName(d))!=null&&j.length>0){return j}else{return null}}}else{if("object"==typeof(d)){var h=null,c=[];if(d.name){var n=d.ele||EG.doc;h=n.getElementsByName(d.name)}else{if(d.tn){var n=d.ele||EG.doc;h=n.getElementsByTagName(d.tn)}else{throw new Error("EG.DOM#$:name和tn不能同时为空")}}var l=d.idx;delete d.name;delete d.tn;delete d.ele;delete d.idx;for(var f=0,k=h.length;f<k;f++){var g=true;for(var m in d){if(EG.$in("name","tn","ele","idx")){continue}if(d[m]!=h[f][m]){g=false;break}}if(g){c.push(h[f])}}if(l!=null){return EG.Array.get(c,l)}return c}}},CEKeywords:["ele","element","tn","tagName","pn","parentNode","cn","childNodes","style"],CENicknames:{cls:"className"},NS_SVG:"http://www.w3.org/2000/svg",CSVG:function(c){return b.CE(c,{svg:true})},CVML:function(c){return b.CE(c,{vml:true})},CE:function(u,f){var r=f?f.svg:false;var g=f?f.vml:false;var n=f?f.setAtr:false;if(typeof(u)=="string"){return EG.doc.createElement(u)}var k=EG.unnull(u.ele,u.element),c=EG.unnull(u.tn,u.tagName),p=EG.unnull(u.pn,u.parentNode),h=EG.unnull(u.cn,u.childNodes),q=u.style;if(!k&&!c){throw new Error("EG.DOM#CE:标签名和ele不能同时为空")}if(c){if(c.toUpperCase()=="IFRAME"&&u.name&&EG.Browser.isIE6()){k=EG.doc.createElement("<iframe name='"+u.name+"'></iframe>")}else{if(r){k=EG.doc.createElementNS(b.NS_SVG,c)}else{if(g){k=EG.doc.createElement(c)}else{k=EG.doc.createElement(c)}}if(g){k.xmlns="urn:schemas-microsoft-com:vml";u.cls="vml"}}}for(var v in u){if(EG.$in(v,b.CEKeywords)){continue}var l=u[v];if(v=="name"){k.setAttribute("name",l);k.name=l}else{if(v.indexOf("$")>0){var t=v.indexOf("$"),m=v.substring(0,t),d=v.substring(t+1,v.length);if(!k[m]){k[m]={}}k[m][d]=l}else{if(v.indexOf("on")==0&&!EG.String.endWith(v,"Src")){EG.bindEvent(k,v.substr(2).toLowerCase(),l)}else{try{if(b.CENicknames[v]){v=b.CENicknames[v]}if(r){if(v=="innerText"){b.removeChilds(k);k.appendChild(document.createTextNode(l))}else{if(v=="DATA"){k.DATA=l}else{k.setAttribute(v,l)}}}else{if(n){k.setAttribute(v,l)}k[v]=l}}catch(s){throw new Error("EG.DOM#CE:不支持对 "+k.tagName+" 的 "+v+" 赋值。"+s.description)}}}}}if(q){EG.css(k,q)}if(p){if(p.isItem){p.getElement().appendChild(k)}else{p.appendChild(k)}}if(h){for(var o=0,j=h.length;o<j;o++){if(EG.isLit(h[o])){h[o]=EG.CE(h[o],f)}else{if(h[o].isItem){h[o]=h[o].getElement()}}k.appendChild(h[o])}}return k},isElement:function(c){return c&&c.nodeType==1},isNodeList:function(c){return c!=null&&c.nodeType==null&&c.length!=null&&typeof(c.length)=="number"&&c.item!=null},isTag:function(d,c){return d.tagName.toUpperCase()==c.toUpperCase()},isActive:function(c){return b.has(EG.getBody(),c)},has:function(e,c){var d=c.parentNode;while(d!=null){if(d==e){return true}d=d.parentNode}return false},remove:function(d){if(!EG.Array.isArray(d)){d=[d]}for(var c=0;c<d.length;c++){d[c].parentNode.removeChild(d[c])}},removeChilds:function(c){while(c.childNodes&&c.childNodes.length>0){c.removeChild(c.childNodes[0])}return c},preNode:function(c){return b._nextNode(c,-1)},nextNode:function(c){return b._nextNode(c,1)},_nextNode:function(f,g){if(!f||!f.parentNode){return null}var e=b.childNodes(f.parentNode);for(var d=0,c=e.length;d<c;d++){if(e[d]==f){return(d+g<c)?e[d+g]:null}}},childNode:function(g,h){if(typeof(h)=="string"){var f=h.split("_");for(var d=0,c=f.length;d<c;d++){if(f[d]!="n"){f[d]=parseInt(f[d])}g=EG.Array.get(b.childNodes(g),f[d])}return g}else{if(typeof(h)=="number"){var e=b.childNodes(g);return EG.Array.get(e,h)}}throw new Error("EG.DOM#childNode不支持索引类型:"+typeof(h))},childNodes:function(g){var e=[],f=g.childNodes;for(var d=0,c=f.length;d<c;d++){if(f[d].nodeType==1){e.push(f[d])}}return e},getValue:function(p,d){d=d||{};if(typeof(p)=="string"){p=b.$(p)}if(p==null){throw new Error("EG.DOM#getValue:未找到匹配元素")}var g=b.isNodeList(p);var m=(g?p[0]:p).tagName.toUpperCase();if(m=="INPUT"){var j=(g?p[0]:p).type.toUpperCase();if(j=="TEXT"||j=="PASSWORD"||j=="HIDDEN"||j=="FILE"){if(g){throw new Error("EG.DOM#getValue:暂不支持数组Element INPUT "+j)}return p.value}else{if(j=="RADIO"){if(g){for(var f=0,k=p.length;f<k;f++){if(p[f].checked==true){return p[f].value}}}else{return(p.checked==true)?p.value:null}}else{if(j=="CHECKBOX"){if(g){var n=[];for(var f=0,k=p.length;f<k;f++){if(p[f].checked==true){n.push(p[f].value)}}return n}else{return(p.checked==true)?p.value:null}}else{throw new Error("EG.DOM#getValue:不支持input "+j+"类型")}}}}else{if(m=="SELECT"){if(g){throw new Error("EG.DOM#getValue:暂不支持数组Element SELECT")}var e=d.getText!=null?d.getText:false;var h=d.ignoreEmpty!=null?d.ignoreEmpty:false;var c=p.options;var n=[];var o=p.multiple;for(var f=0,k=c.length;f<k;f++){if(c[f].selected==true){var l=null;if(h&&c[f].value==""){l=null}else{l=(e)?c[f].text:c[f].value}if(o){n.push(l)}else{return l}}}if(o){return n}else{return null}}else{if(m=="TEXTAREA"){if(g){var n=[];for(var f=0,k=p.length;f<k;f++){n.push(p.value)}return n}else{return p.value}}else{if(p.innerHTML!=null){if(g){var n=[];for(var f=0,k=p.length;f<k;f++){n.push(p.innerHTML)}return n}else{return p.innerHTML}}else{throw new Error(" EG.DOM#getValue:不支持其它类型值")}}}}return null},getValues:function(h){var l={};var j=b.$(h);var k=h.getElementsByTagName("INPUT");k.concat(h.getElementsByTagName("SELECT"));k.concat(h.getElementsByTagName("TEXTAREA"));for(var g=0,d=k.length;g<d;g++){if(j[g].id==""&&j[g].name==""){continue}var f=j[g].id!=""?j[g].id:j[g].name;l[f]=b.getValue(f)}return l},setValue:function(o,l,d){d=d||{};if(typeof(o)=="string"){o=EG.$(o)}if(o==null){throw new Error("EG.DOM#setValue未找到匹配元素")}var h=b.isNodeList(o);var m=(h?o[0]:o).tagName.toUpperCase();if(l==null){l=""}if(m=="INPUT"){var j=o.type.toUpperCase();if(j=="TEXT"||j=="PASSWORD"||j=="HIDDEN"){o.value=l}else{if(j=="RADIO"){if(h){for(var f=0,k=o.length;f<k;f++){if(o[f].value==l){o[f].checked=true;break}}}else{if(o.value==l){o.checked=true}}}else{if(j=="CHECKBOX"){var e=d.spliter||",";if(l instanceof Array){if(!h){throw new Error("EG.DOM#setValue:值为数组时,Element类型必须为数组")}for(var f=0,k=o.length;f<k;f++){if(EG.Array.has(l,o[f].value)){o[f].checked=true}}}else{if(h){for(var f=0,k=o.length;f<k;f++){if(l==o[f].value){o[f].checked=true}}}else{if(o.value==l){o.checked=true}}}}else{throw new Error("Engin#setValue:不支持该input "+j+"类型")}}}}else{if(m=="SELECT"){var n=d.cmpText!=null?d.cmpText:false;var g=d.fireOnchange!=null?d.fireOnchange:true;var c=o.options;for(var f=0,k=c.length;f<k;f++){if((n&&c[f].text==l)||(!n&&c[f].value==l)){c[f].selected=true;if(g){EG.Event.fireEvent(o,"onchange")}return}}}else{if(m=="TEXTAREA"){o.value=l}else{if(o.innerHTML!=null){o.innerHTML=l}else{throw new Error(" EG.DOM#setValue:不支持对其它类型设值")}}}}},setValues:function(d){if(d!=null){for(var c in d){b.setValue(c,d[c])}}},removeOptions:function(c){c=EG.$(c);if(!b.isTag(c,"SELECT")){throw new Error("EG.DOM#removeOptions:待删除的对象非Select组件")}b.removeChilds(c)},addOptions:function(k,f,e,l,h,d){k=EG.$(k);l=l||1;e=e||0;for(var g=0,j=f.length;g<j;g++){var c=EG.CE({tn:"option",value:(typeof(l)=="function")?l(f[g]):f[g][l],innerHTML:(typeof(e)=="function")?e(f[g]):f[g][e]});if(h&&d){c[h]=(typeof(d)=="function")?d(f[g]):f[g][d]}k.options[k.options.length]=c}},getOption:function(g,h){var f=g.options;for(var e=0,c=f.length;e<c;e++){var d=f[e];if(d.value==h){return d}}},getSelectedOption:function(c){return c.options[c.options.selectedIndex]},removeOption:function(k,l){var e=null,c;if(typeof(l)=="string"){l={value:l}}if((c=l.idx)!=null){e="idx"}else{if((c=l.value)!=null){e="value"}else{if((c=l.text)!=null){e="text"}else{throw new Error("EG.DOM#removeOption:参数不正确")}}}var h=k.options;if(EG.isArray(c)){for(var g=h.length-1;g>=0;g--){for(var d=0,f=c.length;d<f;d++){if((e=="idx"&&g==c[d])||(e=="value"&&c[d]==h[g].value)||(e=="text"&&c[d]==h[g].text)){k.removeChild(h[g]);break}}}}else{for(var g=h.length-1;g>=0;g--){if((e=="idx"&&g==c)||(e=="value"&&c==h[g].value)||(e=="text"&&c==h[g].text)){k.removeChild(h[g])}}}},getTextvalues:function(h,f){f=f||{};var c=f.egnoreEmpty!=null?f.egnoreEmpty:true;var j=[];var g=h.options;for(var e=0,d=g.length;e<d;e++){if(c&&g[e].value==""){continue}j.push([g[e].text,g[e].value])}return j},selectBoxes:function(h,f,g){if(!f){f=true}var e=EG.doc.getElementsByName(h);for(var d=0,c=e.length;d<c;d++){if(g!=null){e[d].checked=(e[d].value=g)?f:!f}else{e[d].checked=f}}},removeAllRows:function(c){c=EG.$(c);if(c==null){return}b.removeChilds(c)},getActionFrame:function(){if(!EG.DOM.actionFrame){EG.DOM.actionFrame=EG.CE({pn:EG.getBody(),tn:"iframe",id:"actionFrame",name:"actionFrame",style:"display:none"})}return EG.DOM.actionFrame},getIdx:function(e){var d=b.childNodes(e.parentNode);for(var c=0;c<d.length;c++){if(d[c]==e){return c}}throw new Error("未找到索引")}}});var b=EG.DOM;EG.CSVG=EG.DOM.CSVG;EG.CVML=EG.DOM.CVML;EG.$=EG.DOM.$;EG.CE=EG.DOM.CE;EG.getValue=EG.DOM.getValue;EG.setValue=EG.DOM.setValue}());(function(){var getComputedStyle=window.getComputedStyle||(EG.doc&&EG.doc.defaultView&&EG.doc.defaultView.getComputedStyle);EG.define("EG.Style",{statics:{c:{dv:"display:inline-block;vertical-align:middle;"},debugSize:function(ele){if(ele.getElement){ele=ele.getElement()}alert(EG.toJSON(EG.getSize(ele)))},parseTransform:function(transform){var m={};var regex=new RegExp("([a-zA-Z0-9]+)\\(([^)]*)\\)","ig");if(!transform){return m}var as=transform.match(regex);if(!as){return m}for(var i=0;i<as.length;i++){var a=as[i];var k=a.replace(regex,"$1");var vs=null;var ss=a.replace(regex,"$2");if(EG.Browser.isIE()){ss=ss.replace(new RegExp(" ","ig"),",")}eval("vs=["+ss+"]");m[k]=vs}return m},size2Num:function(size,refferNum){if(typeof(size)=="string"){if(EG.String.endWith(size,"%")){if(refferNum==null){Error("EG.Style#size2Num:百分比时参考尺寸不能为空.")}return parseInt(refferNum*parseInt(size.substr(0,size.length-1))/100)}else{if(EG.String.endWith(size,"px")){return parseInt(size.substr(0,size.length-2))}else{if(size=="thin"){return 1}else{if(size=="medium"){return 3}else{if(size=="thick"){return 5}else{if(size=="auto"){return 0}else{if(size==""){return 0}else{throw new Error("EG.Style#size2Num:暂不支持数值转换."+size)}}}}}}}}else{if(typeof(size)=="number"){return size}else{throw new Error("EG.Style#size2Num:参数类型无法识别."+typeof(size))}}},getSize:function(ele,css){if(ele.getElement){ele=ele.getElement()}var cs=Style.current(ele);var size={offsetWidth:ele.offsetWidth,offsetHeight:ele.offsetHeight,clientWidth:css?cs.width:ele.clientWidth,clientHeight:css?cs.height:ele.clientHeight,borderLeft:(cs.borderLeftStyle!="none")?(Style.size2Num(cs.borderLeftWidth)):0,borderTop:(cs.borderTopStyle!="none")?(Style.size2Num(cs.borderTopWidth)):0,borderRight:(cs.borderRightStyle!="none")?(Style.size2Num(cs.borderRightWidth)):0,borderBottom:(cs.borderBottomStyle!="none")?(Style.size2Num(cs.borderBottomWidth)):0,paddingLeft:(Style.size2Num(cs.paddingLeft)),paddingTop:(Style.size2Num(cs.paddingTop)),paddingRight:(Style.size2Num(cs.paddingRight)),paddingBottom:(Style.size2Num(cs.paddingBottom))};size.marginLeft=(Style.size2Num(cs.marginLeft));size.marginTop=(Style.size2Num(cs.marginTop));size.marginRight=(Style.size2Num(cs.marginRight));size.marginBottom=(Style.size2Num(cs.marginBottom));size.vScrollWidth=size.offsetWidth-size.clientWidth-size.borderLeft-size.borderRight;size.hScrollWidth=size.offsetHeight-size.clientHeight-size.borderTop-size.borderBottom;size.innerWidth=size.clientWidth-size.paddingLeft-size.paddingRight;size.innerHeight=size.clientHeight-size.paddingTop-size.paddingBottom;size.outerWidth=size.offsetWidth+size.marginLeft+size.marginRight;size.outerHeight=size.offsetHeight+size.marginTop+size.marginBottom;return size},getInnerTop:function(s){return Style.getInnerOut(s,"Top")},getInnerBottom:function(s){return Style.getInnerOut(s,"Bottom")},getInnerLeft:function(s){return Style.getInnerOut(s,"Left")},getInnerRight:function(s){return Style.getInnerOut(s,"Right")},getInnerOut:function(s,type){return s["margin"+type]+s["padding"+type]+s["border"+type]},num2Size:function(num){if(typeof(num)=="number"){return num+"px"}else{if(typeof(num)=="string"){return num}else{throw new Error("EG.Style#num2Size:参数类型无法识别."+typeof(num))}}},create:function(styles){var ss="";for(var key in styles){ss+=(key+"{"+styles[key]+"}\n")}if(Style.element.styleSheet){Style.element.styleSheet.cssText+=ss}else{Style.element.appendChild(EG.doc.createTextNode(ss))}},createSheet:function(url){var css=EG.CE({tn:"link",rel:"stylesheet",rev:"stylesheet",type:"text/css",media:"screen",href:url});EG.doc.getElementsByTagName("head")[0].appendChild(css);return css},current:function(ele){if(getComputedStyle){return getComputedStyle(ele)}else{return ele.currentStyle}},css:function(ele,style){if(ele==null){throw new Error("EG.Style#set:ele不能为空")}else{if(ele.getElement){ele=ele.getElement()}}var m={};if(typeof(style)=="string"){var ses=style.split(";");for(var i=0;i<ses.length;i++){var sp=EG.String.trim(ses[i]);if(sp==""){continue}var sess=sp.split(":");if(sess[0].indexOf("-")>0){var sesss=sess[0].split("-");sess[0]=sesss[0]+sesss[1].substring(0,1).toUpperCase()+sesss[1].substring(1)}m[EG.String.trim(sess[0])]=EG.String.trim(sess[1])}}else{if(typeof(style)=="object"){m=style}else{throw new Error("EG.Style#set:style类型错误")}}for(var k in m){var v=m[k];if(k=="float"){if(EG.Browser.isFirefox()||EG.Browser.isChrome()){k="cssFloat"}else{k="styleFloat"}}else{if(k=="vertical-align"){k="verticalAlign"}}try{ele.style[k]=v}catch(e){throw new Error(ele.tagName+"不支持属性"+k+"的值为:"+v)}}},isHide:function(ele,inherit){if(!inherit){var cs=Style.current(ele);return cs.display=="none"}else{var p=ele;while(p){if(p==EG.getBody()){return false}var cs=Style.current(p);if(cs.display=="none"||cs.visible=="none"){return true}p=p.parentNode}return true}},show:function(){Style.displays(arguments,true)},hide:function(){Style.displays(arguments,false)},visibles:function(eles,visible){for(var i=0,il=eles.length;i<il;i++){Style.visible(eles[i],visible)}},visible:function(ele,visible){ele.style.visibility=visible?"visible":"hidden"},displays:function(eles,display){for(var i=0,il=eles.length;i<il;i++){Style.display(eles[i],display)}},display:function(ele,display){if(ele.getElement){ele=ele.getElement()}if(typeof(display)=="boolean"){var cs=Style.current(ele);if(!cs){return}if(!display){if(cs.display!="none"){ele.oDisplay=cs.display}ele.style.display="none"}else{ele.style.display=ele.oDisplay||""}}else{if(typeof(display)=="string"){ele.style.display=display}else{throw new Error("EG.Style#display:不支持"+display)}}},centerChilds:function(pn,horizontal){var cns=pn.childNodes;if(cns.length>0){if(horizontal){var mw=0;for(var i=0;i<cns.length;i++){var cn=cns[i];var s=EG.getSize(cn);if(i==0){mw+=s.outerWidth-s.marginLeft-s.marginRight}else{var sl=EG.getSize(cns[i-1]);var lm=Math.max(sl.marginRight,s.marginLeft);mw+=lm+s.outerWidth-s.marginRight-s.marginLeft}}var m=parseInt((EG.getSize(pn).innerWidth-mw)/2);EG.css(cns[0],"margin-left:"+m+"px");EG.css(cns[cns.length-1],"margin-right:"+m+"px")}else{alert("暂时不支持")}}},middleChilds:function(pn,horizontal){var cns=pn.childNodes;var ps=EG.getSize(pn);if(cns.length>0){if(horizontal){for(var i=0;i<cns.length;i++){var cn=cns[i];var s=EG.getSize(cn);var m=parseInt((ps.innerHeight-(s.outerHeight-s.marginTop-s.marginBottom))/2);EG.css(cn,"margin-top:"+m+"px;margin-bottom:"+m+"px")}}else{alert("暂不支持")}}},center:function(ele,ct){var tn=ele.tagName.toUpperCase();if(tn=="DIV"){ct=ct||ele.parentNode;ele.style.position="absolute";ele.style.marginLeft="0px";ele.style.left=parseInt((EG.getSize(ct).innerWidth-EG.getSize(ele).outerWidth)/2)+"px"}else{throw new Error("EG.Style#center:暂不支持该元素:"+tn)}},middle:function(ele,ct){var tn=ele.tagName.toUpperCase();if(tn=="DIV"){ct=ct||ele.parentNode;ele.style.position="absolute";ele.style.marginTop="0px";ele.style.top=parseInt((ct.offsetHeight-EG.getSize(ele).offsetHeight)/2)+"px"}else{throw new Error("EG.Style#center:暂不支持该元素:"+tn)}},full:function(ele,ct){if(!ct){ct=ele.parentNode}if(!ct){throw new Error("EG.Style#full:父元素不能为空")}ele.style.width=ct.clientWidth+"px";if(ct==EG.getBody()){ele.style.height=Math.max((EG.doc.documentElement?EG.doc.documentElement.clientHeight:EG.getBody().clientHeight),EG.getBody().clientHeight)+"px"}else{ele.style.height=ct.clientHeight+"px"}},moveTo:function(ele,pos){if(pos.x){Style.css(ele,"left:"+pos.x+"px")}if(pos.y){Style.css(ele,"top:"+pos.y+"px")}},fade:function(obj,start,end,callback,speed){if(!speed){speed=20}var _a=(start>end)?-5:5;if(EG.doc.all){obj.style.filter="alpha(opacity="+parseInt(start+_a)+")"}else{obj.style.opacity=parseInt(start+_a)/100}if(start==end){if(!callback){return}return callback()}window.setTimeout(function(){Style.fade(obj,start+_a,end,callback,speed)},speed);return null},setCls:function(ele,cls,clsPre){if(cls==null){return}clsPre=clsPre?(clsPre+"-"):"";if(!EG.isArray(cls)){cls=[cls]}if(cls.length==0){return}var s="";for(var i=0;i<cls.length;i++){if(i!=0){s+=" "}s+=clsPre+cls[i]}ele.className=s},addCls:function(ele,cls){var clss=ele.className.split(" ");if(EG.Array.has(clss,cls)){return}clss.push(cls);ele.className=clss.join(" ")},removeCls:function(ele,cls){var clss=ele.className.split(" ");if(!EG.Array.has(clss,cls)){return}EG.Array.remove(clss,cls);ele.className=clss.join(" ")}}});var Style=EG.Style;EG.getSize=Style.getSize;EG.debugSize=Style.debugSize;EG.css=Style.css;EG.hide=Style.hide;EG.show=Style.show;EG.setCls=Style.setCls;EG.onload(function(){Style.element=EG.doc.createElement("style");Style.element.type="text/css";EG.doc.getElementsByTagName("HEAD").item(0).appendChild(Style.element);if(EG.Browser.isIE6()){Style.c.dv+="*display:inline;zoom:1;"}})})();(function(){EG.define("EG.$Q",{constructor:function(a){return new EG.$Q.prototype._init(a)},_init:function(a){this.ele=EG.$(a);return this},val:function(a){if(arguments.length==0){return EG.DOM.getValue(this.ele)}else{return EG.DOM.setValue(this.ele,a)}},show:function(){EG.show(this.ele);return this},hide:function(){EG.hide(this.ele);return this},center:function(a){EG.Style.center(this.ele,a);return this},hasClass:function(a){return this.ele.className.indexOf(a)>=0},removeChilds:function(){return EG.DOM.removeChilds(this.ele)},appendChild:function(a){this.ele.appendChild(a);return this},innerHTML:function(a){this.ele.innerHTML=a;return this},getChild:function(a){return this.ele.childNodes[a]},css:function(a){EG.css(this.ele,a);return this}});(function(){var b=["click","dblclick","mouseover","mouseout"];for(var a=0;a<b.length;a++){EG.$Q.prototype[b[a]]=function(c){var d=this;EG.bindEvent(this.ele,function(){c.apply(d)});return this}}})();EG.$Q.prototype._init.prototype=EG.$Q.prototype})();(function(){EG.define("EG.MMVC",{statics:{mmvcPath:"/mmvc/",getPath:function(uri){if(uri==null){uri=EG.MMVC.mmvcPath}return{call:uri+"jsonrpc/call",connect:uri+"push/connect",moditor:uri+"utils/profile",upload:uri+"upload",download:uri+"download"}},call:function(cfg){cfg=cfg||{};var muti=cfg.muti,rpc=cfg.rpc,method=cfg.method,params=EG.unnull(cfg.params,[]),exHandler=cfg.exHandler,cb=cfg.callback,httpPost=EG.unnull(cfg.httpPost,[]),mutiReturn=cfg.mutiReturn||"map";if(!muti&&EG.String.isBlank(rpc)){throw new Error("EG#call:rpc不能为空")}if(!muti&&EG.String.isBlank(method)){throw new Error("EG#call:method不能为空")}var url=cfg.callPath||EG.MMVC.getPath().call;var strParams="";if(muti){strParams=(mutiReturn!="map"?"mutiReturn="+mutiReturn+"&":"")+"muti="+EG.Ajax.javaURLEncoding(EG.Tools.toJSON(muti))}else{strParams="rpc="+rpc+"&method="+method+"&params="+EG.Ajax.javaURLEncoding(EG.Tools.toJSON(params))}var content=null;if(!httpPost){url+="?"+strParams}else{content=strParams}var handleEx=function(ex){if(EG.MMVC.exClassHandlers[ex.exClass]){return EG.MMVC.exClassHandlers[ex.exClass](ex)}else{if(exHandler){return exHandler(ex)}else{if(EG.MMVC.defExHandler){return EG.MMVC.defExHandler(ex)}else{throw new Error(ex.exMsg)}}}};var callback=function(resText,req){var obj=null;if(resText!=null&&resText!=""){eval("obj="+resText+";")}if(obj!=null){if(!EG.isArray(obj)){throw new Error("结构非数组:"+resText)}if(obj[0]===0){return cb(obj[1])}else{return handleEx(new EG.MMVC.Exception(obj[1]["exClass"],obj[1]["exMsg"]))}}else{return cb(obj)}};return EG.Ajax.send({url:url,httpPost:httpPost,content:content,callback:callback})},exClassHandlers:{},defExHandler:null,connect:function(cfg){cfg=cfg||{};var actionFrame=cfg.actionFrame;if(!actionFrame){actionFrame=EG.DOM.getActionFrame()}actionFrame.src=EG.MMVC.getPath().connect},download:function(cfg){var actionFrame=cfg.actionFrame;var policy=cfg.policy;var params=cfg.params||{};var ps="";for(var key in params){ps+="&"+key+"="+EG.Ajax.javaURLEncoding(params[key])}if(!actionFrame){actionFrame=EG.DOM.getActionFrame()}actionFrame.src=EG.MMVC.getPath().download+"?policy="+policy+ps}}});EG.MMVC.Exception=function(exClass,exMsg){this.exClass=exClass;this.exMsg=exMsg};EG.call=EG.MMVC.call})();