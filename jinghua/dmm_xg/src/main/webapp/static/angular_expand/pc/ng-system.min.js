var system=angular.module("system",[]);system.factory("echartService",function(){var b=function(f,e){if(e instanceof Array&&f.length==e.length){for(var g=0,d=e.length;g<d;g++){arguments.callee(f[g],e[g])}}else{if(e instanceof Object){for(key in e){var h=e[key];if(!f[key]||h==null||typeof h=="string"||typeof h=="number"||typeof h=="boolean"||typeof h=="function"||(h instanceof Array&&(typeof h[0]=="string"||typeof h[0]=="number"||typeof h=="boolean"))){f[key]=h}else{arguments.callee(f[key],e[key])}}}}return f};var c={};var a=[];return{mapclick:function(g){var j;if(a.length==0){var f=$.ajax({url:"static/angular_expand/map/placedz.json",async:false}).responseText.replace(/[\r\n]/g,"");j=JSON.parse(f);a=j}else{j=a}var h="";for(var e=0;e<j.length;e++){var d=j[e];if(g==d[1]){h=d[0]}}return h==""?g:h},renderCommonChart:function(f){f.isSort=f.isSort||false;type=f.type||"column";var u={},v={};var s=[],o=[],e=[];for(var p in f.data){var t=f.data[p];if(!u[t.name]){if(t.name){e.push(t.name)}o.push({name:t.name,data:[]});u[t.name]=true}if(!v[t.field]){s.push(t.field);v[t.field]=true}}if(f.isSort){s.sort(function(j,i){return j>i?1:-1})}var w,h,x,r=[];for(var n in o){w=o[n];w.type=type;if(w.type=="area"){w.type="line";w.areaStyle={normal:{}}}if(w.type=="spline"){w.type="line";w.smooth=true}if(w.type=="areaspline"){w.type="line";w.smooth=true;w.areaStyle={normal:{}}}for(var l=0;l<s.length;l++){h=s[l];for(var g=0;g<f.data.length;g++){x=f.data[g];if(x.name==w.name&&x.field==h){w.data.push(parseFloat(x.value));r.push(x)}}if(w.data.length<l){w.data.push(0);r.push({})}}}var d=f.name?f.name:"";var q={title:{text:f.title,left:"center"},tooltip:{trigger:"axis",formatter:"{b} <br/> {c}"+d,axisPointer:{type:"shadow"}},toolbox:{show:true,feature:{dataView:{show:true,readOnly:false},restore:{show:true},saveAsImage:{show:true}}},legend:{x:"left",data:e},xAxis:[{data:s}],yAxis:[{name:d,type:"value"}],series:o};Ice.apply(q,{config:{_data_:r}});return q},renderPieChart:function(w){var d={},f=[];var p=[],t=[];if(w.isMapData){if(a.length==0){var m=$.ajax({url:"static/angular_expand/map/placedz.json",async:false}).responseText.replace(/[\r\n]/g,"");var s=JSON.parse(m);a=s}else{var s=a}for(var r in w.data){var q=w.data[r];if(!d[q.name]){var y="";if(q.name){for(var n=0;n<s.length;n++){var z=s[n];if(q.name==z[0]){y=z[1]}}if(y==""){y=q.name}f.push(y);d[q.name]=true}}var x=w.data[r].name;var l=w.data[r].value;var e="";if(w.data[r].code){e=w.data[r].code}var u="";for(var o=0;o<s.length;o++){var v=s[o];if(x==v[0]){u=v[1];p.push({name:u,value:l,code:e})}}if(u==""){p.push({name:x,value:l,code:e})}}}else{for(var r in w.data){var q=w.data[r];if(!d[q.name]){if(q.name){f.push(q.name)}d[q.name]=true}}p=w.data}t=w.data;var z=w.name?w.name:"";var g={title:{text:"",x:"center"},tooltip:{trigger:"item",formatter:"{b} <br/> {c}"+z+"&nbsp;&nbsp;(占比{d}%)"},legend:{show:false,x:"left",data:f},toolbox:{show:true,feature:{dataView:{show:true,readOnly:false},restore:{show:true},saveAsImage:{show:true}}},label:{emphasis:{show:true,textStyle:{fontSize:"20",fontWeight:"bold"}}},series:[{name:"",type:"pie",radius:"75%",center:["50%","50%"],selectedMode:"single",data:[],itemStyle:{normal:{label:{position:"outer",formatter:"{b}({d}%)"}},emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};g.title=w.title;var h=g.series[0];h.type=w.type;h.data=p;Ice.apply(g,{config:{_data_:t}});return g},renderMapChart:function(s){if($.isEmptyObject(c)){var t=$.ajax({url:"static/angular_expand/map/cityMap.json",async:false}).responseText.replace(/[\r\n]/g,"");var v=JSON.parse(t);c=v}else{var v=c}var o=v;var p=["china","广东","青海","四川","海南","陕西","甘肃","云南","湖南","湖北","黑龙江","贵州","山东","江西","河南","河北","山西","安徽","福建","浙江","江苏","吉林","辽宁","台湾","新疆","广西","宁夏","内蒙古","西藏","北京","天津","上海","重庆","香港","澳门"];var d=echarts.util.mapData.params;for(var h in o){p.push(h);d.params[h]={getGeoJson:(function(j){var i=o[j];return function(x){$.getJSON("static/echarts/2/geoJson/china-main-city/"+i+".json",function(y){x(d.decode(y))})}})(h)}}if(a.length==0){var g=$.ajax({url:"static/angular_expand/map/placedz.json",async:false}).responseText.replace(/[\r\n]/g,"");var n=JSON.parse(g);a=n}else{var n=a}var e="";if(s.mapType=="中国"||s.mapType==null){e="china"}else{for(var m=0;m<n.length;m++){var w=n[m];if(s.mapType==w[0]){e=w[1]}}}if(e==""){e=s.mapType}var l=[];for(var m=0;m<s.data.length;m++){var u=s.data[m].name;var f=s.data[m].value;var q="";for(var k=0;k<n.length;k++){var r=n[k];if(u==r[0]){q=r[1];l.push({name:q,value:f})}}if(q==""){l.push({name:u,value:f})}}if(e=="china"){subtext="中国"}else{subtext=e}option={tooltip:{trigger:"item"},toolbox:{show:true,feature:{dataView:{show:true,readOnly:false},restore:{show:true},saveAsImage:{show:true}}},dataRange:{min:0,max:5000,show:false,x:"left",y:"bottom",text:["高","低"],color:["#ff9900","#ffcd00","#ffff00","#dddddd"],calculable:true},series:[{name:"学生人数",type:"map",mapType:e,selectedMode:"single",itemStyle:{normal:{label:{show:true}},emphasis:{label:{show:true}}},data:l}]};return option},formatOptionSetting:function(k,h){var f="暂无数据";if(h.noDataText){f=h.noDataText||f}if(h){k=b(k,h)}m=k.dataZoom?true:false;if(!m){if(k.series.length>0){for(var j=0;j<k.series.length;j++){if(k.series[j].type=="bar"&&k.xAxis[0].data){if(k.xAxis[0].data.length>14){k.dataZoom={show:true,start:0,end:(12/k.xAxis[0].data.length)*100}}}}}}k.noDataLoadingOption={effect:function(i){i.start=function(o){o._bgDom.innerText=f;o._bgDom.style.textAlign="center";o._domRoot.style.backgroundImage="url(static/resource/images/noData.png)";o._domRoot.style.backgroundRepeat="no-repeat";o._domRoot.style.backgroundPositionX="center";o._domRoot.style.backgroundPositionY="center";o._domRoot.style.backgroundSize="53px 53px";o._bgDom.style.top="60%";o._bgDom.style.width="100%";i.stop=function(){o._bgDom.innerText="";o._bgDom.style.textAlign="";o._domRoot.style.backgroundImage="";o._domRoot.style.backgroundRepeat="";o._domRoot.style.backgroundPositionX="";o._domRoot.style.backgroundPositionY=""}};return i}};if(k.series.length==0){k.series[0]={data:[],type:"bar"}}var l=k.series[0]?k.series[0].type:null;switch(l){case"line":case"bar":case"area":case"spline":case"areaspline":var d={y:60,y2:36,x:65,x2:65},n={padding:[5,55]},g=(k.xAxis[0]&&k.xAxis[0].axisLabel)?true:false,m=k.dataZoom?true:false;if(k.legend.data.length<=0||k.legend.show==false){d.y=40}if(g||m){d.y2=60}if(m&&g){d.y2=80}var e={legend:n,grid:d};k=b(e,k);break}return k},renderVennChart:function(e){serdata=e.data;var d=e.name?e.name:"";var f={tooltip:{trigger:"item",formatter:"{b} <br/> {c}"+d+""},calculable:false,series:[{name:"",type:e.type,itemStyle:{normal:{label:{show:true,textStyle:{fontFamily:"Arial, Verdana, sans-serif",fontSize:16,fontStyle:"italic",fontWeight:"bolder"}},labelLine:{show:false,length:10,lineStyle:{width:1,type:"solid"}}},emphasis:{color:"#cc99cc",borderWidth:3,borderColor:"#996699"}},data:serdata}]};f.title=e.title;return f}}});system.factory("httpService",["$rootScope","toastrService",function(a,b){return{post:function(f){var e=f.data;if(e instanceof Object){for(var d in e){if(e[d]==null){delete e[d]}}}var c=$.ajax({type:"POST",url:base+f.url,data:e,dataType:"json",beforeSend:function(){if(f.beforeSend){f.beforeSend()}},success:function(g){if(f.success){f.success(g)}},error:function(g){var h=g.status+":"+g.statusText;if(h=="200:OK"){b.warning("您没有访问权限，请联系管理员！")}else{b.error("数据请求错误，请刷新页面重试！("+h+")")}if(f.error){f.error(e)}},complete:function(){a.$apply()}});return c},get:function(d){var c=$.ajax({type:"GET",url:d.url,data:d.data,dataType:"json",beforeSend:function(){if(d.beforeSend){d.beforeSend()}},success:function(e){if(d.success){d.success(e)}},error:function(){b.error("数据请求错误，请重试！")},complete:function(){a.$apply()}});return c},callService:function(f){var e=angular.copy(f),g=e.params,d="data",j=[],i=e.service.split("?"),h,c={success:function(k){h=k}};delete e.service;e.beanName=i[0];e.methodName=i[1];if(!e.params){e.params=[]}e.data=angular.toJson(e.params);e.params=angular.toJson(e.params);$.ajax({type:"POST",url:base+"common/getData",data:{params:angular.toJson(e)},dataType:"json",success:function(k){if(h){h(k)}else{c[d]=k.result;delete c.success}}});return c},fileDownload:function(g){var f=g.data;if(f instanceof Object){for(var e in f){if(f[e]==null){delete f[e]}}}var d=base+g.url;var c=$.fileDownload(d,{data:f,successCallback:function(h){g.success()},failCallback:function(i,h){b.error("数据请求错误，请刷新页面重试！")}});return c}}}]);system.factory("locationService",[function(){var a=$("body"),b=function(e,c){var d="";if(e instanceof String||e instanceof Number||e instanceof Boolean){d+="&"+c+"="+encodeURIComponent(e)}else{$.each(e,function(g){var f=c==null?g:c+(e instanceof Array?"["+g+"]":"."+g);d+="&"+b(this,f)})}return d.substr(1)};return{redirect:function(c,d){window.location.href=c+"?"+b(d||{})},redirect_new:function(c,e){var d=c+"?"+b(e||{});var f=window.open("_blank");f.location=d}}}]);system.factory("toastrService",[function(){toastr.options={closeButton:false,debug:false,positionClass:"toast-bottom-full-width",onclick:null,showDuration:"100",hideDuration:"300",timeOut:"3000",extendedTimeOut:"500",showEasing:"linear",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};return{info:function(a){toastr.info(a)},success:function(a){toastr.success(a)},warning:function(a){toastr.warning(a)},error:function(a){toastr.error(a)},clear:function(){toastr.clear()}}}]);system.factory("dialog",["$compile","$rootScope",function(b,f){var d=$("body");var i=$('<div class="modal-backdrop fade in"/>');i.hide();d.append(i);var a='<div class="modal" style="display:none;"><div class="modal-dialog" style="background-color: #FFF;"><div class="modal-header"><button type="button" class="close" ng-click="$dialog_confirm_close()" style="opacity: 1;"><i class="fa fa-times text-danger"></i></button><h4 class="modal-title text-primary"><i class="fa fa-question"></i>&nbsp;提示</h4></div><div class="modal-body">{replacement}</div><div class="modal-footer" style="text-align: center;"><button type="button" class="btn btn-primary" ng-click="$dialog_confirm_sure()">确定</button><button type="button" class="btn btn-default" ng-click="$dialog_confirm_cancel()">关闭</button></div></div></div>';var h='<div class="modal" style="display:none;"><div class="modal-dialog" style="background-color: #FFF;"><div class="modal-body" style="padding:30px 10px;">{replacement}</div><div class="modal-footer" style="text-align: center;"><button type="button" class="btn btn-danger btn-sm" ng-click="$dialog_success_close()">关闭</button></div></div>';var g='<div class="modal" style="display:none;"><div style="position: absolute;left: 50%;top: 35%;margin-left: -30px;width: 60px;text-align: center;color: #FFF;"> <i class="fa fa-spinner fa-spin fa-4x" style=""></i></div>';"</div>";var c=function(j,l){var k=$(b(j.replace("{replacement}",l))(f));i.show();d.append(k);k.fadeIn("fast");return k};var e={};return{alert:function(j,k){f.$dialog_success_close=function(){e.success.remove();i.hide();delete e.success;if(k){k()}};e.success=e.success||c(h,j)},confirm:function(k,l,j){f.$dialog_confirm_close=function(){e.confirm.remove();i.hide();delete e.confirm};f.$dialog_confirm_sure=function(){e.confirm.remove();i.hide();delete e.confirm;if(l){l()}};f.$dialog_confirm_cancel=function(){e.confirm.remove();i.hide();delete e.confirm;if(j){j()}};e.confirm=e.confirm||c(a,k)},showLoading:function(){if(e.loading){i.show();e.loading.fadeIn("fast")}else{e.loading=c(g,"")}},hideLoading:function(){e.loading.fadeOut("fast");i.fadeOut("fast")}}}]);system.factory("mask",function(){var a=$("body");var b=$('<div class="cs-window-background"></div>');var c=$('<div class="cs-window-loading"><div class="cs-window-img"></div></div>');b.hide();c.hide();a.append(b);a.append(c);return{show:function(){b.show()},hide:function(){b.hide()},showLoading:function(){b.show();c.show()},hideLoading:function(){b.hide();c.hide()}}});system.factory("advancedService",[function(){return{getParam:function(d){var b=[],e;for(var c=0,a=d.length;c<a;c++){e=d[c];b.push({code:e.queryCode,values:e.id,group:e.group})}return JSON.stringify(b)},get:function(d,c){var e;if(c!=null){for(var b=0,a=d.length;b<a;b++){e=d[b];if(c==e.queryCode){return e}}}return e},checkedFirst:function(d){if(d!=null&&d.length>0){for(var c=0,a=d.length;c<a;c++){var e=d[c];if(e.queryType!="comboTree"){var b=e.items;if(b.length>0){b[0].checked=true}}}}}}}]);system.directive("echart",["echartService",function(a){return{restrict:"AE",scope:{config:"=",height:"@",ecClick:"&"},link:function(h,g,f){var c=null,b=350;var e=function(n,m){if($(g).height()==0){if(n==null&&m&&m.series){var k;for(var l=0,j=m.series.length;l<j;l++){var o=m.series[l].type;if(l==0){k=o}else{if(k!=o){k=null;break}}}if(k!=null){n=k}}switch(n){case"pie":b=300;break;default:break}h.height=b;g.height(h.height)}c=c||echarts.init(g[0],"macarons");c.showLoading({text:"数据加载中..."})};var d=function(){if(c){c.hideLoading()}};h.renderChart=function(){if(h.config){var q=h.config?h.config.type:null;e(q,h.config);d();var s={};if(q){switch(q){case"line":case"bar":case"area":case"spline":case"areaspline":s=a.renderCommonChart(h.config);break;case"pie":s=a.renderPieChart(h.config);break;case"map":s=a.renderMapChart(h.config);break;case"venn":s=a.renderVennChart(h.config);break;default:s=h.config;break}}else{s=h.config}s.color=s.color?s.color:["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"];var k=null;if(h.config.noDataText){k=h.config.noDataText}else{if(h.config.config){if(h.config.config.noDataText){k=h.config.config.noDataText}}}var n=(h.config.config||s.config)||{};n.noDataText=k;s=a.formatOptionSetting(s,n);q=s.series[0].type;h._option_=s;var j=f.ecClick;var m=s.on||[];h.eventHaveBinded=(j!=null||(m&&m.length>0))&&h.eventHaveBinded!=false?true:false;if(h.eventHaveBinded){if(!(m[0] instanceof Array)){m=[m]}require.config({paths:{echarts:"./static/echarts/2"}});require(["echarts"]);h.ecConfig=require("echarts/config");h.zrEvent=require("zrender/tool/event");if(j){var r=null;switch(q){case"line":case"bar":case"area":case"spline":case"areaspline":r=["CLICK",h.ecClick,true];break;case"map":r=["MAP_SELECTED",h.ecClick,true];break}m.push(r)}for(var o=0,p=m.length;o<p;o++){var l=m[o];h.on(l[0],l[1],l.length==3?l[2]:null)}}c.setOption(s,true)}$(window).resize(function(){if(c){c.resize()}})};h.$watch("config",function(){h.renderChart()},true);h.on=function(j,k,l){var j=j,i="list";c.on(h.ecConfig.EVENT[j],function(s){if(j=="MAP_SELECTED"){s=a.mapclick(s.target)}var r=s.data,m=s.seriesIndex,n=s.dataIndex,q;if(j=="CLICK"){var p=h._option_,o=p.series[m].type;q=p.config?p.config._data_:{};if(o=="bar"||o=="line"){if(q instanceof Array&&q.length>n){r=q[n];if(r[i]&&r[i] instanceof Array&&r[i].length>m){r.data=r[i][m]}}}}if(k){if(l){k({param:s,obj:r,data:q})}else{k(s,r,q)}}});h.eventHaveBinded=false}}}}]);system.directive("checkPermiss",["httpService",function(a){return{restrict:"AE",scope:{callback:"&"},link:function(d,c,b){var e={};e.params=[];e.params.push(b.shirotag);e.service="checkPermiss?checkPermiss";a.callService(e).success(function(f){if(f==true){if(d.callback){d.callback()}return}else{$(c[0]).remove();if(d.callback){d.callback()}}})}}}]);system.directive("cgTree",["$log",function(c){return{restrict:"AE",scope:true,controller:["$scope","$attrs",function b(e,d){var h=d.cgTree;var f=h.match(/^\s*([\$\w]+)\s+in\s+([\S\s]*)\s+of\s+([\S\s]*)$/);if(!f){throw new Error("Expected cgTree in form of '_item_ in _collection_ of _root_' but got '"+h+"'.")}var g=this.ident={value:f[1],collection:f[2],root:f[3]};e.$watch(this.ident.root,function(i){e[g.value]=i})}],compile:function a(e){var f=e.html();return{pre:function d(i,j,h,g){g.template=f}}}}}]).directive("cgTreecurse",["$compile",function(b){return{require:"^cgTree",link:function a(f,h,d,c){var g=["<",h.context.tagName,' ng-repeat="',c.ident.value," in ",c.ident.value,".",c.ident.collection,'">',c.template,"</",h.context.tagName,">"];var e=angular.element(g.join(""));h.replaceWith(e);b(e)(f)}}}]);system.directive("cgCustomComm",function(){return{restrict:"AE",templateUrl:base+"/static/angular_expand/pc/directives/tpl/customComm.html",scope:{source:"=",expand:"@",noborder:"@",onChange:"&"},link:function(c,b,a){c.result=[];c.innerTreeResult={};c.$watch("innerTreeResult",function(f){if(f.queryCode){var e=false;for(var d=0;d<c.result.length;d++){if(c.result[d].queryCode==c.innerTreeResult.queryCode){c.result.splice(d,1,angular.copy(c.innerTreeResult));e=true}}if(!e){c.result.push(angular.copy(c.innerTreeResult))}c.onChange({$data:c.result})}},true);c.cancleQueryAll=function(){c.result=[];for(var e=0;e<c.queryArray.length;e++){var f=c.queryArray[e];if(c.queryArray[e].queryType=="comboTree"){c.queryArray[e].items.dataChangeDate=new Date()}else{for(var d=0;d<f.items.length;d++){f.items[d].checked=false}}}};c.cancleQuery=function(g){for(var e=0;e<c.result.length;e++){if(c.result[e]==g){c.result.splice(e,1)}}if(g.queryType=="comboTree"){for(var e=0;e<c.queryArray.length;e++){if(c.queryArray[e].queryCode==g.queryCode){c.queryArray[e].items.dataChangeDate=new Date()}}}else{for(var e in c.queryArray){var f=c.queryArray[e];if(g.queryName==f.queryName){for(var d=0;d<f.items.length;d++){f.items[d].checked=false}}}}};c.queryArray=angular.copy(c.source);c.showAll=function(e){e.isAll=true;for(var d in e.items){e.items[d].show=true}};c.isExpandALL=c.expand?true:false;c.expandALL=function(){c.isExpandALL=!c.isExpandALL;for(var d=1;d<c.queryArray.length;d++){c.queryArray[d].isShow=!c.queryArray[d].isShow}};c.change=function(d,e){c.changeIt(d,e);c.onChange({$data:c.result})};c.$watch("source",function(){c.queryArray=angular.copy(c.source);c.setDefaultChecked()},true);c.changeIt=function(h,m){for(var d=0;d<m.items.length;d++){m.items[d].checked=false}h.checked=true;var g={},k=false;angular.copy(h,g);g.queryName=m.queryName;g.queryCode=m.queryCode;g.group=m.group;var l=[];for(var e in c.result){var f=c.result[e];if(f.queryCode!=g.queryCode){l.push(f)}else{l.push(g);k=true}}if(!k){l.push(g)}c.result=l};c.setDefaultChecked=function(){for(var f in c.queryArray){var g=c.queryArray[f];if(f<1){g.isShow=true}else{g.isShow=c.isExpandALL}g.isAll=g.items.length<=5?true:false;if(g.queryType!="comboTree"){for(var e in g.items){var d=g.items[e];d.show=true;if(d.checked){c.changeIt(d,g)}if(e>=5){d.show=false}}}}};if(!c.noborder){c.noborder=true}}}});system.directive("cgComboTree",["$interval",function(a){return{restrict:"AE",templateUrl:base+"/static/angular_expand/pc/directives/tpl/comboTree.html",scope:{source:"=",result:"=",code:"=",group:"="},link:function(d,c,b){var f=0;d.packageSourceData=function(h){h.nodeId=f++;if(h.children){for(var g=0;g<h.children.length;g++){h.children[g].parentNodeId=h.nodeId;d.packageSourceData(h.children[g])}}};d.selectTree=[];d.$watch("source",function(){d.treeData={};d.treeData=angular.copy(d.source);angular.copy({},d.result);d.packageSourceData(d.treeData);d.selectTree.splice(0,d.selectTree.length);d.selectTree.push(d.treeData);d.findeDefaultChecked(d.treeData)},true);d.findPanrentOfNode=function(j,g){if(j.nodeId!=g.nodeId){if(j.parentNodeId==g.nodeId){d.selectTree.push(g);d.findPanrentOfNode(g,d.treeData)}else{if(g.children){for(var h=0;h<g.children.length;h++){d.findPanrentOfNode(j,g.children[h])}}}}};d.cgComboTreeNodeClick=function(h){d.selectTree.splice(0,d.selectTree.length);d.selectTree.push(h);d.findPanrentOfNode(h,d.treeData);d.selectTree.reverse();var g=angular.copy(d.selectTree);d.selectTree=[];a(function(){d.selectTree=g},1,1);angular.copy(h,d.result);delete d.result.children;d.result.queryCode=angular.copy(d.code);d.result.queryType="comboTree";d.result.group=angular.copy(d.group)};var e=false;d.findeDefaultChecked=function(h){if(h.checked){e=true;d.cgComboTreeNodeClick(h)}else{if(h.children){for(var g=0;g<h.children.length;g++){if(e){e=false;break}else{d.findeDefaultChecked(h.children[g])}}}}}}}}]);system.directive("cgSelect",["$parse","$timeout",function(c,b){var a='<div class="btn-group cg-select-dropdown"><button type="button" class="btn btn-default ss-drop-input dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="input-area">{{display}}</span><span class="pull-right"><span class="line"></span><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></span></button><ul class="dropdown-menu dropdown-menu-scrollbar"><li ng-repeat="item in list" ng-click="selectOption(item,$index)" ng-class="{active:value==item.id}"><a href="">{{item.mc}}</a></li></ul></div>';return{restrict:"A",scope:{list:"=data",value:"=ngModel",valueField:"@valueField",displayField:"@displayField",onChange:"&"},template:a,link:function(h,f,e){var g=h.displayField||"mc",d=h.valueField||"id";h.$parent.$watch(e.data,function(j){h.list=j;b(function(){h.$apply()})});h.$watch("value",function(k,j){if(k!=j){i(k,h.list,h)}});h.selectOption=function(k,j){var l=k[d];if(l==h.value){return}h.value=l;h.display=k[g];if(h.onChange){h.onChange({$value:k[d],$data:k})}};var i=function(o,n,l){if(!o||o==null){l.display=null;return}for(var k=0,j=n.length;k<j;k++){var m=n[k];if(m[d]==o){l.value=m[d];l.display=m[g];return}}};i(h.value,h.list,h)}}}]);system.directive("partModal",[function(){return{restrict:"AE",scope:{showModal:"="},link:function(d,c,a){c.css({position:"relative"});var e=$("<div><div style='position: absolute;left: 50%;top: 35%;margin-left: -30px;width: 60px;text-align: center;color: #FFF;'> <i class='fa fa-spinner fa-pulse fa-2x'></i></div></div>").css({"background-color":"rgb(180, 180, 180)",opacity:"0.4"});var b=$("<div />").css({position:"absolute",left:0,top:0,"z-index":999});e.appendTo(b);c.append(b);d.$watch("showModal",function(f){if(f){e.css({height:"inherit",width:"inherit",});b.css({height:"100%",width:"100%",});b.fadeIn("fast")}else{b.hide()}})}}}]);system.controller("PaginationController",["$scope","$attrs","$parse",function(c,a,f){var b=this,d={$setViewValue:angular.noop},e=a.numPages?f(a.numPages).assign:angular.noop;this.init=function(h,g){d=h;this.config=g;d.$render=function(){b.render()};if(a.itemsPerPage){c.$parent.$watch(f(a.itemsPerPage),function(i){b.itemsPerPage=parseInt(i,10);c.totalPages=b.calculateTotalPages()})}else{this.itemsPerPage=g.itemsPerPage}};this.calculateTotalPages=function(){var g=this.itemsPerPage<1?1:Math.ceil(c.totalItems/this.itemsPerPage);return Math.max(g||0,1)};this.render=function(){c.page=parseInt(d.$viewValue,10)||1};c.selectPage=function(g){if(c.page!==g&&g>0&&g<=c.totalPages){d.$setViewValue(g);d.$render()}};c.getText=function(g){return c[g+"Text"]||b.config[g+"Text"]};c.noPrevious=function(){return c.page===1};c.noNext=function(){return c.page===c.totalPages};c.$watch("totalItems",function(){c.totalPages=b.calculateTotalPages()});c.$watch("totalPages",function(g){e(c.$parent,g);if(c.page>g){c.selectPage(g)}else{d.$render()}})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:false,directionLinks:true,firstText:"《",previousText:"〈",nextText:"〉",lastText:"》",rotate:true}).directive("pagination",["$parse","paginationConfig",function(b,a){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",template:'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>',replace:true,link:function(m,g,l,e){var i=e[0],c=e[1];if(!c){return}var k=angular.isDefined(l.maxSize)?m.$parent.$eval(l.maxSize):a.maxSize,f=angular.isDefined(l.rotate)?m.$parent.$eval(l.rotate):a.rotate;m.boundaryLinks=angular.isDefined(l.boundaryLinks)?m.$parent.$eval(l.boundaryLinks):a.boundaryLinks;m.directionLinks=angular.isDefined(l.directionLinks)?m.$parent.$eval(l.directionLinks):a.directionLinks;i.init(c,a);if(l.maxSize){m.$parent.$watch(b(l.maxSize),function(n){k=parseInt(n,10);i.render()})}function d(o,p,n){return{number:o,text:p,active:n}}function j(q,s){var o=[];var t=1,w=s;var v=(angular.isDefined(k)&&k<s);if(v){if(f){t=Math.max(q-Math.floor(k/2),1);w=t+k-1;if(w>s){w=s;t=w-k+1}}else{t=((Math.ceil(q/k)-1)*k)+1;w=Math.min(t+k-1,s)}}for(var p=t;p<=w;p++){var u=d(p,p,p===q);o.push(u)}if(v&&!f){if(t>1){var n=d(t-1,"...",false);o.unshift(n)}if(w<s){var r=d(w+1,"...",false);o.push(r)}}return o}var h=i.render;i.render=function(){h();if(m.page>0&&m.page<=m.totalPages){m.pages=j(m.page,m.totalPages)}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:true}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",template:'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>',replace:true,link:function(f,e,d,b){var g=b[0],c=b[1];if(!c){return}f.align=angular.isDefined(d.align)?f.$parent.$eval(d.align):a.align;g.init(c,a)}}}]);system.directive("csWindow",["$timeout",function(c){var a=$("body");var b=$('<div class="cs-window-background"></div>');b.hide();a.append(b);var e=function(f,o){var k=$(window),n=f.width(),j=f.height(),l=k.outerWidth(true),i=k.outerHeight(true),m=(i-j)/2-40,g=(l-n)/2;m=m<0?0:m;g=g<0?0:g;if(o=="true"){f.css("left",g+"px");f.css("top",m+"px")}};var d=function(f,g){f.offset(g)};return{restrict:"A",scope:{show:"=show",offset:"=offset",clickDisappear:"=clickDisappear"},link:function(l,k,i){var h=i.autoCenter||"true",g=i.mask||"true",f=i.clickDisappear||true;var j=false;l.$watch("show",function(m,n){if(m==true){k.show();if(g==="true"){b.show()}if(f){c(function(){$(document).one("click",function(o){l.show=false;c(function(){l.$apply()})})})}c(function(){l.reOffset()})}else{k.hide();b.hide()}});if(f){if(!j){k.on("click",function(m){m.stopPropagation()});j=true}}l.$watch("offset",function(m,n){d(k,m)});if(l.show){k.show()}else{k.hide()}k.addClass("cs-window-windows");l.reOffset=function(){if(!l.offset){e(k,h)}else{d(k,l.offset)}};$(window).resize(function(){l.reOffset()});l.reOffset()}}}]);system.directive("csDatepicker",["$parse","$timeout",function(b,a){return{restrict:"A",scope:{maxValue:"=maxvalue",minValue:"=minvalue",onChange:"&onChange"},link:function(m,e,l){var h=m.onChange,g=m.maxValue,k=m.minValue,f=l.clickId,i=b(l.ngModel),d=i.assign;var j=function(n){d(m.$parent,n.cal.getDateStr());if(h){h()}a(function(){m.$apply(function(){})})};var c={onpicked:j,dateFmt:"yyyy-MM-dd",readOnly:true,doubleCalendar:true,autoUpdateOnChanged:true,oncleared:j};if(g){c.maxDate=g}if(k){c.minDate=k}e.on("focus",function(){if(m.maxValue){c.maxDate=m.maxValue}if(m.minValue){c.minDate=m.minValue}WdatePicker(c)});if(f){$("#"+f).on("click",function(){if(m.maxValue){c.maxDate=m.maxValue}if(m.minValue){c.minDate=m.minValue}e.focus()})}}}}]);system.directive("modalForm",["httpService",function(a){return{restrict:"AE",templateUrl:base+"/static/angular_expand/pc/directives/tpl/modalForm.html",scope:{config:"="},link:function(d,c,b){d.hideModalForm=function(){d.config.show=false};c.click(function(f){d.hideModalForm();d.$apply()}).find(".modal-dialog").click(function(f){f.stopPropagation()});d.$watch("config.show",function(e){if(e==true){c.find(".fade").show().scrollTop(0).addClass("in");d.vm.curpage=1;d.vm.rows=[];d.vm.total=0;d.sortColumn=null}else{c.find(".fade").removeClass("in").fadeOut("fast");d.vm.curpage=0}});d.vm={showModal:false,pagesize:10,curpage:1,rows:[],total:0,pageTotal:0};d.$watch("vm.curpage",function(f,e){if(f!=0){d.vm.showModal=true;d.queryPageItems(d.config.params).then(function(g){d.vm.showModal=false;d.vm.rows=g.rows;d.vm.total=g.total;d.vm.pageTotal=parseInt(d.vm.total%d.vm.pagesize==0?d.vm.total/d.vm.pagesize:d.vm.total/d.vm.pagesize+1)})}});d.queryPageItems=function(f){var e={curpage:d.vm.curpage,pagesize:d.vm.pagesize,sumcount:d.vm.total,sortColumn:d.sortColumn,order:d.sortOrder};e=JSON.stringify(e);return a.post({url:d.config.url,data:angular.extend({page:e},f)})};d.download=function(){var e={curpage:1,pagesize:d.vm.total,sortColumn:d.sortColumn,order:d.sortOrder};e=JSON.stringify(e);var f=d.config.params;a.fileDownload({url:d.config.exportUrl,data:angular.extend({fileName:d.config.title,page:e},f),})};d.orderByColumn=function(e){if(d.sortColumn==e){if(d.sortOrder=="asc"){d.sortOrder="desc"}else{if(d.sortOrder=="desc"){d.sortColumn=""}}}else{d.sortOrder="asc";d.sortColumn=e}d.vm.showModal=true;d.queryPageItems(d.config.params).then(function(f){d.vm.showModal=false;d.vm.rows=f.rows})}}}}]);system.directive("toolTip",[function(){return{restrict:"AE",transclude:true,templateUrl:base+"/static/angular_expand/pc/directives/tpl/tooltip.html",scope:{placement:"@",hideIcon:"@"},link:function(c,b,a){b.addClass("tooltip-container");b.on("mouseenter",function(){var e=b.height();var f=b.width();var i=b.position();var k=i.left;var d=i.top;var g=b.find(".popover");var m=g.width();var l=g.height();var h=-200,j=-200;switch(c.placement){case"top":h=k+(f-m)/2-2;j=d-l-4;break;case"right":h=k+f;j=d+(e-l)/2-4;break;case"bottom":h=k+(f-m)/2-2;j=d+e-2;break;case"left":h=k-m-4;j=d+(e-l)/2-4;break;default:h=k+f-2;j=d+(e-l)/2-2;break}g.css({left:h,top:j})})}}}]);